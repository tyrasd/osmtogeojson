!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.osmtogeojson=e()}}(function(){var e;return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var f="function"==typeof require&&require;if(!a&&f)return f(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){var r=e[s][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t){var r=e("./lodash.custom.js"),n=e("geojson-rewind"),i=e("./parse_osmpbf.js"),o=e("./polygon_features.json"),s={};s=function(e,t,s){function a(e){for(var t=new Array,n=new Array,i=new Array,o=0;o<e.elements.length;o++)switch(e.elements[o].type){case"node":var s=e.elements[o];t.push(s);break;case"way":var a=r.clone(e.elements[o]);a.nodes=r.clone(a.nodes),n.push(a);break;case"relation":var f=r.clone(e.elements[o]);f.members=r.clone(f.members),i.push(f)}return l(t,n,i)}function f(e){function t(e,t,r){e.hasAttribute(r)&&(t[r]=e.getAttribute(r))}var n=new Array,i=new Array,o=new Array;return r.each(e.getElementsByTagName("node"),function(e,i){var o={};r.each(e.getElementsByTagName("tag"),function(e){o[e.getAttribute("k")]=e.getAttribute("v")}),n[i]={type:"node"},t(e,n[i],"id"),t(e,n[i],"lat"),t(e,n[i],"lon"),t(e,n[i],"version"),t(e,n[i],"timestamp"),t(e,n[i],"changeset"),t(e,n[i],"uid"),t(e,n[i],"user"),r.isEmpty(o)||(n[i].tags=o)}),r.each(e.getElementsByTagName("way"),function(e,n){var o={},s=[];r.each(e.getElementsByTagName("tag"),function(e){o[e.getAttribute("k")]=e.getAttribute("v")}),r.each(e.getElementsByTagName("nd"),function(e,t){s[t]=e.getAttribute("ref")}),i[n]={type:"way"},t(e,i[n],"id"),t(e,i[n],"version"),t(e,i[n],"timestamp"),t(e,i[n],"changeset"),t(e,i[n],"uid"),t(e,i[n],"user"),s.length>0&&(i[n].nodes=s),r.isEmpty(o)||(i[n].tags=o)}),r.each(e.getElementsByTagName("relation"),function(e,n){var i={},s=[];r.each(e.getElementsByTagName("tag"),function(e){i[e.getAttribute("k")]=e.getAttribute("v")}),r.each(e.getElementsByTagName("member"),function(e,r){s[r]={},t(e,s[r],"ref"),t(e,s[r],"role"),t(e,s[r],"type")}),o[n]={type:"relation"},t(e,o[n],"id"),t(e,o[n],"version"),t(e,o[n],"timestamp"),t(e,o[n],"changeset"),t(e,o[n],"uid"),t(e,o[n],"user"),s.length>0&&(o[n].members=s),r.isEmpty(i)||(o[n].tags=i)}),l(n,i,o)}function u(e,t){i(e,function(e,r){var n;e&&t(e),n=l(r.nodes,r.ways,r.rels),t(null,n)})}function l(e,i,o){function s(e,r){if("object"!=typeof r&&(r={}),"function"==typeof t.uninterestingTags)return!t.uninterestingTags(e,r);for(var n in e)if(t.uninterestingTags[n]!==!0&&r[n]!==!0&&r[n]!==e[n])return!0;return!1}function a(e){var t={timestamp:e.timestamp,version:e.version,changeset:e.changeset,user:e.user,uid:e.uid};for(k in t)void 0===t[k]&&delete t[k];return t}function f(e,t){function n(e){for(var t,r,n,i,o,s,a=function(e){return e[0]},f=function(e){return e[e.length-1]},u=[];e.length;)for(t=e.pop().nodes.slice(),u.push(t);e.length&&a(t)!==f(t);){for(r=a(t),n=f(t),i=0;i<e.length;i++){if(s=e[i].nodes,n===a(s)){o=t.push,s=s.slice(1);break}if(n===f(s)){o=t.push,s=s.slice(0,-1).reverse();break}if(r==f(s)){o=t.unshift,s=s.slice(0,-1);break}if(r==a(s)){o=t.unshift,s=s.slice(1).reverse();break}s=o=null}if(!s)break;e.splice(i,1),o.apply(t,s)}return u}function i(e){var t,r,n=function(e,t){for(var r=0;r<t.length;r++)if(o(t[r],e))return!0;return!1},i=function(e){return e.map(function(e){return[+e.lat,+e.lon]})},o=function(e,t){for(var r=e[0],n=e[1],i=!1,o=0,s=t.length-1;o<t.length;s=o++){var a=t[o][0],f=t[o][1],u=t[s][0],l=t[s][1],p=f>n!=l>n&&(u-a)*(n-f)/(l-f)+a>r;p&&(i=!i)}return i};for(e=i(e),t=0;t<f.length;t++)if(r=i(f[t]),n(r,e))return t}var o,s=!1;o=t.members.filter(function(e){return"way"===e.type}),o=o.map(function(e){var t=c[e.ref];return void 0===t?void(s=!0):{id:e.ref,role:e.role||"outer",way:t,nodes:t.nodes.filter(function(e){return void 0!==e?!0:(s=!0,!1)})}}),o=r.compact(o);var f,u;f=n(o.filter(function(e){return"outer"===e.role})),u=n(o.filter(function(e){return"inner"===e.role}));var l;l=f.map(function(e){return[e]});for(var p=0;p<u.length;p++){var h=i(u[p]);void 0!==h&&l[h].push(u[p])}var d=[];if(d=r.compact(l.map(function(e){var t=r.compact(e.map(function(e){return e.length<4?void 0:r.compact(e.map(function(e){return[+e.lon,+e.lat]}))}));if(0!=t.length)return t})),0==d.length)return!1;var y="MultiPolygon";1===d.length&&(y="Polygon",d=d[0]);var g={type:"Feature",id:e.type+"/"+e.id,properties:{type:e.type,id:e.id,tags:e.tags||{},relations:b[e.type][e.id]||[],meta:a(e)},geometry:{type:y,coordinates:d}};return s&&(g.properties.tainted=!0),g}for(var u=new Object,l=0;l<e.length;l++)void 0!==e[l].lat&&(u[e[l].id]=e[l]);for(var h=new Object,l=0;l<e.length;l++)"undefined"!=typeof e[l].tags&&s(e[l].tags)&&(h[e[l].id]=!0);for(var l=0;l<o.length;l++)if(r.isArray(o[l].members))for(var d=0;d<o[l].members.length;d++)"node"==o[l].members[d].type&&(h[o[l].members[d].ref]=!0);for(var c=new Object,y=new Object,l=0;l<i.length;l++)if(r.isArray(i[l].nodes)){c[i[l].id]=i[l];for(var d=0;d<i[l].nodes.length;d++)y[i[l].nodes[d]]=!0,i[l].nodes[d]=u[i[l].nodes[d]]}for(var g=new Array,l=0;l<e.length;l++)(!y[e[l].id]||h[e[l].id])&&g.push(e[l]);for(var m=new Array,l=0;l<o.length;l++)r.isArray(o[l].members)&&(m[o[l].id]=o[l]);for(var b={node:{},way:{},relation:{}},l=0;l<o.length;l++)if(r.isArray(o[l].members))for(var d=0;d<o[l].members.length;d++){var v;switch(o[l].members[d].type){case"node":v=u[o[l].members[d].ref];break;case"way":v=c[o[l].members[d].ref];break;case"relation":v=m[o[l].members[d].ref]}if(v){var w=o[l].members[d].type,E=o[l].members[d].ref;"undefined"==typeof b[w][E]&&(b[w][E]=[]),b[w][E].push({role:o[l].members[d].role,rel:o[l].id,reltags:o[l].tags})}}var S,T={type:"FeatureCollection",features:new Array};for(l=0;l<g.length;l++)"undefined"!=typeof g[l].lon&&"undefined"!=typeof g[l].lat&&T.features.push({type:"Feature",id:"node/"+g[l].id,properties:{type:"node",id:g[l].id,tags:g[l].tags||{},relations:b.node[g[l].id]||[],meta:a(g[l])},geometry:{type:"Point",coordinates:[+g[l].lon,+g[l].lat]}});for(var I={type:"FeatureCollection",features:new Array},U={type:"FeatureCollection",features:new Array},l=0;l<o.length;l++)if("undefined"!=typeof o[l].tags&&("multipolygon"==o[l].tags.type||"boundary"==o[l].tags.type)){if(!r.isArray(o[l].members))continue;for(var A=0,d=0;d<o[l].members.length;d++)"outer"==o[l].members[d].role&&A++;if(o[l].members.forEach(function(e){c[e.ref]&&("outer"!==e.role||s(c[e.ref].tags,o[l].tags)||(c[e.ref].is_multipolygon_outline=!0),"inner"!==e.role||s(c[e.ref].tags)||(c[e.ref].is_multipolygon_outline=!0))}),0==A)continue;var N=!1;1!=A||s(o[l].tags,{type:!0})||(N=!0);var P=null;if(N){var x=o[l].members.filter(function(e){return"outer"===e.role})[0];if(x=c[x.ref],void 0===x)continue;x.is_multipolygon_outline=!0,P=f(x,o[l])}else P=f(o[l],o[l]);if(P===!1)continue;U.features.push(P)}for(var l=0;l<i.length;l++)if(r.isArray(i[l].nodes)&&!i[l].is_multipolygon_outline){for(i[l].tainted=!1,i[l].hidden=!1,coords=new Array,d=0;d<i[l].nodes.length;d++)"object"==typeof i[l].nodes[d]?coords.push([+i[l].nodes[d].lon,+i[l].nodes[d].lat]):i[l].tainted=!0;if(!(coords.length<=1)){var O="LineString";"undefined"!=typeof i[l].nodes[0]&&i[l].nodes[0]===i[l].nodes[i[l].nodes.length-1]&&"undefined"!=typeof i[l].tags&&p(i[l].tags)&&(O="Polygon",coords=[coords]);var P={type:"Feature",id:"way/"+i[l].id,properties:{type:"way",id:i[l].id,tags:i[l].tags||{},relations:b.way[i[l].id]||[],meta:a(i[l])},geometry:{type:O,coordinates:coords}};i[l].tainted&&(P.properties.tainted=!0),"LineString"==O?I.features.push(P):U.features.push(P)}}return S={type:"FeatureCollection",features:[]},S.features=S.features.concat(U.features),S.features=S.features.concat(I.features),S.features=S.features.concat(T.features),t.flatProperties&&S.features.forEach(function(e){e.properties=r.merge(e.properties.meta,e.properties.tags,{id:e.properties.type+"/"+e.properties.id})}),S=n(S,!0)}function p(e){var r=t.polygonFeatures;if("function"==typeof r)return r(e);if("no"===e.area)return!1;for(var n in e){var i=e[n],o=r[n];if("undefined"!=typeof o&&"no"!==i){if(o===!0)return!0;if(o.included_values&&o.included_values[i]===!0)return!0;if(o.excluded_values&&o.excluded_values[i]!==!0)return!0}}return!1}t=r.merge({flatProperties:!1,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:o},t);var h;return"undefined"!=typeof XMLDocument&&e instanceof XMLDocument||"undefined"==typeof XMLDocument&&e.childNodes?h=f(e):e.nodes&&e.ways&&e.rels?h=l(e.nodes,e.ways,e.rels):e instanceof ArrayBuffer?u(e,s):h=a(e),h},s.toGeojson=s,t.exports=s},{"./lodash.custom.js":2,"./parse_osmpbf.js":20,"./polygon_features.json":21,"geojson-rewind":3}],2:[function(e,t,r){(function(){function e(){return x.pop()||[]}function n(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function i(e){e.length=0,x.length<B&&x.push(e)}function o(e,t,r){t||(t=0),"undefined"==typeof r&&(r=e?e.length:0);for(var n=-1,i=r-t||0,o=Array(0>i?0:i);++n<i;)o[n]=e[t+n];return o}function s(){}function a(e){function t(){if(n){var e=o(n);pt.apply(e,arguments)}if(this instanceof t){var s=u(r.prototype),a=r.apply(s,e||arguments);return E(a)?a:s}return r.apply(i,e||arguments)}var r=e[0],n=e[2],i=e[4];return St(t,e),t}function f(t,r,s,a,u){if(s){var l=s(t);if("undefined"!=typeof l)return l}var p=E(t);if(!p)return t;var h=st.call(t);if(!W[h]||!wt.nodeClass&&n(t))return t;var d=bt[h];switch(h){case M:case F:return new d(+t);case z:case H:return new d(t);case q:return l=d(t.source,_.exec(t)),l.lastIndex=t.lastIndex,l}var c=Tt(t);if(r){var y=!a;a||(a=e()),u||(u=e());for(var g=a.length;g--;)if(a[g]==t)return u[g];l=c?d(t.length):{}}else l=c?o(t):Ot({},t);return c&&(lt.call(t,"index")&&(l.index=t.index),lt.call(t,"input")&&(l.input=t.input)),r?(a.push(t),u.push(l),(c?xt:_t)(t,function(e,t){l[t]=f(e,r,s,a,u)}),y&&(i(a),i(u)),l):l}function u(e){return E(e)?yt(e):{}}function l(e,t,r){if("function"!=typeof e)return N;if("undefined"==typeof t||!("prototype"in e))return e;var n=e.__bindData__;if("undefined"==typeof n&&(wt.funcNames&&(n=!e.name),n=n||!wt.funcDecomp,!n)){var i=ft.call(e);wt.funcNames||(n=!j.test(i)),n||(n=L.test(i),St(e,n))}if(n===!1||n!==!0&&1&n[1])return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)}}return A(e,t)}function p(e){function t(){var e=l?a:this;if(i){var g=o(i);pt.apply(g,arguments)}if((s||d)&&(g||(g=o(arguments)),s&&pt.apply(g,s),d&&g.length<f))return n|=16,p([r,c?n:-4&n,g,null,a,f]);if(g||(g=arguments),h&&(r=e[y]),this instanceof t){e=u(r.prototype);var m=r.apply(e,g);return E(m)?m:e}return r.apply(e,g)}var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],f=e[5],l=1&n,h=2&n,d=4&n,c=8&n,y=r;return St(t,e),t}function h(e,t,r,n,i){(Tt(t)?I:_t)(t,function(t,o){var s,a,f=t,u=e[o];if(t&&((a=Tt(t))||jt(t))){for(var l=n.length;l--;)if(s=n[l]==t){u=i[l];break}if(!s){var p;r&&(f=r(u,t),(p="undefined"!=typeof f)&&(u=f)),p||(u=a?Tt(u)?u:[]:jt(u)?u:{}),n.push(t),i.push(u),p||h(u,t,r,n,i)}}else r&&(f=r(u,t),"undefined"==typeof f&&(f=t)),"undefined"!=typeof f&&(u=f);e[o]=u})}function d(e,t,r,n,i,s){var f=1&t,u=2&t,l=4&t,h=16&t,c=32&t;if(!u&&!w(e))throw new TypeError;h&&!r.length&&(t&=-17,h=r=!1),c&&!n.length&&(t&=-33,c=n=!1);var y=e&&e.__bindData__;if(y&&y!==!0)return y=o(y),y[2]&&(y[2]=o(y[2])),y[3]&&(y[3]=o(y[3])),!f||1&y[1]||(y[4]=i),!f&&1&y[1]&&(t|=8),!l||4&y[1]||(y[5]=s),h&&pt.apply(y[2]||(y[2]=[]),r),c&&dt.apply(y[3]||(y[3]=[]),n),y[1]|=t,d.apply(null,y);var g=1==t||17===t?a:p;return g([e,t,r,n,i,s])}function c(){$.shadowedProps=C,$.array=$.bottom=$.loop=$.top="",$.init="iterable",$.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var r in e)$[r]=e[r];var n=$.args;$.firstArg=/^[^,]+/.exec(n)[0];var i=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+n+") {\n"+Et($)+"\n}");return i(l,D,nt,lt,O,m,Tt,S,$.keys,it,X,vt,H,ot,st)}function y(e){return"function"==typeof e&&at.test(e)}function g(e){var t,r;return!e||st.call(e)!=Z||(t=e.constructor,w(t)&&!(t instanceof t))||!wt.argsClass&&m(e)||!wt.nodeClass&&n(e)?!1:wt.ownLast?(Bt(e,function(e,t,n){return r=lt.call(n,t),!1}),r!==!1):(Bt(e,function(e,t){r=t}),"undefined"==typeof r||lt.call(e,r))}function m(e){return e&&"object"==typeof e&&"number"==typeof e.length&&st.call(e)==R||!1}function b(e,t,r,n){return"boolean"!=typeof t&&null!=t&&(n=r,r=t,t=!1),f(e,t,"function"==typeof r&&l(r,n,1))}function v(e){var t=!0;if(!e)return t;var r=st.call(e),n=e.length;return r==V||r==H||(wt.argsClass?r==R:m(e))||r==Z&&"number"==typeof n&&w(e.splice)?!n:(_t(e,function(){return t=!1}),t)}function w(e){return"function"==typeof e}function E(e){return!(!e||!X[typeof e])}function S(e){return"string"==typeof e||e&&"object"==typeof e&&st.call(e)==H||!1}function T(t){var r=arguments,n=2;if(!E(t))return t;if("number"!=typeof r[2]&&(n=r.length),n>3&&"function"==typeof r[n-2])var s=l(r[--n-1],r[n--],2);else n>2&&"function"==typeof r[n-1]&&(s=r[--n]);for(var a=o(arguments,1,n),f=-1,u=e(),p=e();++f<n;)h(t,a[f],s,u,p);return i(u),i(p),t}function I(e,t,r){if(t&&"undefined"==typeof r&&Tt(e))for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);else xt(e,t,r);return e}function U(e){for(var t=-1,r=e?e.length:0,n=[];++t<r;){var i=e[t];i&&n.push(i)}return n}function A(e,t){return arguments.length>2?d(e,17,o(arguments,2),null,t):d(e,1,null,null,t)}function N(e){return e}function P(){}var x=[],O={},B=40,_=/\w*$/,j=/^\s*function[ \n\r\t]+\w/,L=/\bthis\b/,C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],R="[object Arguments]",V="[object Array]",M="[object Boolean]",F="[object Date]",D="[object Error]",Y="[object Function]",z="[object Number]",Z="[object Object]",q="[object RegExp]",H="[object String]",W={};W[Y]=!1,W[R]=W[V]=W[M]=W[F]=W[z]=W[Z]=W[q]=W[H]=!0;var G={configurable:!1,enumerable:!1,value:null,writable:!1},$={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},X={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J=X[typeof window]&&window||this,K=X[typeof r]&&r&&!r.nodeType&&r,Q=X[typeof t]&&t&&!t.nodeType&&t,et=Q&&Q.exports===K&&K,tt=X[typeof global]&&global;!tt||tt.global!==tt&&tt.window!==tt||(J=tt);var rt=[],nt=Error.prototype,it=Object.prototype,ot=String.prototype,st=it.toString,at=RegExp("^"+String(st).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ft=Function.prototype.toString,ut=y(ut=Object.getPrototypeOf)&&ut,lt=it.hasOwnProperty,pt=rt.push,ht=it.propertyIsEnumerable,dt=rt.unshift,ct=function(){try{var e={},t=y(t=Object.defineProperty)&&t,r=t(e,e,e)&&t}catch(n){}return r}(),yt=y(yt=Object.create)&&yt,gt=y(gt=Array.isArray)&&gt,mt=y(mt=Object.keys)&&mt,bt={};bt[V]=Array,bt[M]=Boolean,bt[F]=Date,bt[Y]=Function,bt[Z]=Object,bt[z]=Number,bt[q]=RegExp,bt[H]=String;var vt={};vt[V]=vt[F]=vt[z]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},vt[M]=vt[H]={constructor:!0,toString:!0,valueOf:!0},vt[D]=vt[Y]=vt[q]={constructor:!0,toString:!0},vt[Z]={constructor:!0},function(){for(var e=C.length;e--;){var t=C[e];for(var r in vt)lt.call(vt,r)&&!lt.call(vt[r],t)&&(vt[r][t]=!1)}}();var wt=s.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},r=[];e.prototype={valueOf:1,y:1};for(var n in new e)r.push(n);for(n in arguments);wt.argsClass=st.call(arguments)==R,wt.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),wt.enumErrorProps=ht.call(nt,"message")||ht.call(nt,"name"),wt.enumPrototypes=ht.call(e,"prototype"),wt.funcDecomp=!y(J.WinRTError)&&L.test(function(){return this}),wt.funcNames="string"==typeof Function.name,wt.nonEnumArgs=0!=n,wt.nonEnumShadows=!/valueOf/.test(r),wt.ownLast="x"!=r[0],wt.spliceObjects=(rt.splice.call(t,0,1),!t[0]),wt.unindexedChars="x"[0]+Object("x")[0]!="xx";try{wt.nodeClass=!(st.call(document)==Z&&!({toString:0}+""))}catch(i){wt.nodeClass=!0}}(1);var Et=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",wt.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):wt.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),wt.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),wt.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var r=[];if(wt.enumPrototypes&&r.push('!(skipProto && index == "prototype")'),wt.enumErrorProps&&r.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",r.length&&(t+="    if ("+r.join(" && ")+") {\n  "),t+=e.loop+";    ",r.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&r.push("hasOwnProperty.call(iterable, index)"),r.length&&(t+="    if ("+r.join(" && ")+") {\n  "),t+=e.loop+";    ",r.length&&(t+="\n    }"),t+="\n  }    ",wt.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||wt.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};yt||(u=function(){function e(){}return function(t){if(E(t)){e.prototype=t;var r=new e;e.prototype=null}return r||J.Object()}}());var St=ct?function(e,t){G.value=t,ct(e,"__bindData__",G)}:P;wt.argsClass||(m=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&lt.call(e,"callee")&&!ht.call(e,"callee")||!1});var Tt=gt||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&st.call(e)==V||!1},It=c({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),Ut=mt?function(e){return E(e)?wt.enumPrototypes&&"function"==typeof e||wt.nonEnumArgs&&e.length&&m(e)?It(e):mt(e):[]}:It,At={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:Ut,loop:"if (callback(iterable[index], index, collection) === false) return result"},Nt={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:Ut,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},Pt={top:"if (!objectTypes[typeof iterable]) return result;\n"+At.top,array:!1},xt=c(At),Ot=c(Nt,{top:Nt.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Bt=c(At,Pt,{useHas:!1}),_t=c(At,Pt);w(/x/)&&(w=function(e){return"function"==typeof e&&st.call(e)==Y});var jt=ut?function(e){if(!e||st.call(e)!=Z||!wt.argsClass&&m(e))return!1;var t=e.valueOf,r=y(t)&&(r=ut(t))&&ut(r);return r?e==r||ut(e)==r:g(e)}:g;s.assign=Ot,s.bind=A,s.compact=U,s.forEach=I,s.forIn=Bt,s.forOwn=_t,s.keys=Ut,s.merge=T,s.each=I,s.extend=Ot,s.clone=b,s.identity=N,s.isArguments=m,s.isArray=Tt,s.isEmpty=v,s.isFunction=w,s.isObject=E,s.isPlainObject=jt,s.isString=S,s.noop=P,s.VERSION="2.4.1",K&&Q&&et&&((Q.exports=s)._=s)}).call(this)},{}],3:[function(e,t){function r(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(n(r,t)),e;case"Feature":return e.geometry=r(e.geometry,t),e;case"Polygon":case"MultiPolygon":return i(e,t);default:return e}}function n(e,t){return function(r){return e(r,t)}}function i(e,t){return"Polygon"===e.type?e.coordinates=o(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(n(o,t))),e}function o(e,t){t=!!t,e[0]=s(e[0],!t);for(var r=1;r<e.length;r++)e[r]=s(e[r],t);return e}function s(e,t){return a(e)===t?e:e.reverse()}function a(e){return f.ring(e)>=0}var f=e("geojson-area");t.exports=r},{"geojson-area":4}],4:[function(e,t){function r(e){if("Polygon"===e.type)return n(e.coordinates);if("MultiPolygon"===e.type){for(var t=0,r=0;r<e.coordinates.length;r++)t+=n(e.coordinates[r]);return t}return null}function n(e){var t=0;if(e&&e.length>0){t+=Math.abs(i(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(i(e[r]))}return t}function i(e){var t=0;if(e.length>2){for(var r,n,i=0;i<e.length-1;i++)r=e[i],n=e[i+1],t+=o(n[0]-r[0])*(2+Math.sin(o(r[1]))+Math.sin(o(n[1])));t=t*s.RADIUS*s.RADIUS/2}return t}function o(e){return e*Math.PI/180}var s=e("wgs84");t.exports.geometry=r,t.exports.ring=i},{wgs84:5}],5:[function(e,t){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],6:[function(e,t){function r(e,t,r,n){var i=new DataView(e).getInt32(t,!1);return n(null,i)}function n(e,t,r,n,i){var o=new Uint8Array(r);return o.set(new Uint8Array(e,t,r)),f.readPBFElementFromBuffer(o,n,i)}function i(e,t){return t(null,e.byteLength)}function o(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onerror=function(){t(new Error(this.status+": "+this.statusText))},r.onload=function(){t(null,this.response)},r.send()}function s(e,t){e.filePath?o(e.filePath,t):e.buffer?t(null,e.buffer):t(new Error('Use either the "filePath" option to pass an URL or the "buffer" option to pass an ArrayBuffer.'))}function a(e,t){t&&t(null)}var f=e("./buffer.js");t.exports={readBlobHeaderSize:r,readPBFElement:n,getFileSize:i,open:s,close:a}},{"./buffer.js":7}],7:[function(e,t){function r(e,t,r){return r(null,t(e))}function n(e){return new Uint8Array(e.toArrayBuffer())}t.exports={readPBFElementFromBuffer:r,blobDataToBuffer:n}},{}],8:[function(e,t){function r(e,t){var r=new n.Inflate(i.blobDataToBuffer(e.zlib_data),{bufferSize:e.raw_size});return t(null,r.decompress())}var n=e("../../node_modules/zlibjs/bin/inflate.min.js").Zlib,i=e("./buffer.js");t.exports={inflateBlob:r}},{"../../node_modules/zlibjs/bin/inflate.min.js":19,"./buffer.js":7}],9:[function(e,t){function r(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t}function n(e,t,n){return n(null,t(r(e)))}function i(e,t,r){var n,i,o;for(n=e.view,i=new Buffer(r),o=0;r>o;++o)i.writeUInt8(n.getUint8(o+t),o);return i}function o(e){var t,r,n;for(t=e.view,n=0,n=0;n<t.byteLength-1&&30876!==t.getUint16(n);++n);return r=t.byteLength-n,i(e,n,r)}t.exports={readPBFElementFromBuffer:n,blobDataToBuffer:o}},{}],10:[function(e,t){function r(e,t,r){return e(new Error("Expected "+t+" bytes but got "+r))}function n(e,t,n,i){var o;o=new Buffer(n),f.read(e,o,0,n,t,function(e,t,o){return t!==n?r(i,n,t):i(null,o.readInt32BE(0))})}function i(e,t,n,i,o){var s;return n>33554432?o(new Error("PBF element too big: "+n+" bytes")):(s=new Buffer(n),void f.read(e,s,0,n,t,function(e,t,s){return t!==n?r(o,n,t):u.readPBFElementFromBuffer(s,i,o)}))}function o(e,t){f.fstat(e,function(e,r){return t(e,r.size)})}function s(e,t){f.open(e.filePath,"r",t)}function a(e,t){return f.close(e,t)}var f=e("fs"),u=e("./buffer.js");t.exports={readBlobHeaderSize:n,readPBFElement:i,getFileSize:o,open:s,close:a}},{"./buffer.js":9}],11:[function(e,t){function r(e,t){n.inflate(i.blobDataToBuffer(e.zlib_data),t)}var n=e("zlib"),i=e("./buffer.js");t.exports={inflateBlob:r}},{"./buffer.js":9}],12:[function(e,t){function r(e,t,r,n){return E.readPBFElement(e,t,r,S.BlobHeader.decode,n)}function n(e,t,n){E.readBlobHeaderSize(e,t,I,function(i,o){return i?n(i):r(e,t+I,o,function(e,r){return e?n(e):(r.position=t+I+o,n(e,{position:t,size:I+o+r.datasize,blobHeader:r}))})})}function i(e,t){E.getFileSize(e,function(r,i){function o(){n(e,s,function(e,r){return e?t(e):(a.push(r),s=r.position+r.size,i>s?void o():t(null,a))})}var s,a;s=0,a=[],o()})}function o(e){var t,r;return e in this.cache?r=this.cache[e]:(t=this.s[e],r=t.readUTF8StringBytes(t.length-t.offset,t.offset).string,this.cache[e]=r),r}function s(e){e.cache={},e.getEntry=o}function a(e,t){function r(){var r,n,i,o,s,a,f,u;if(!t.dense)return null;for(s=t.dense.keys_vals,i={},r=[],n=0;n<s.length;)o=s[n++],0!==o?(a=s[n++],f=e.stringtable.getEntry(o),u=e.stringtable.getEntry(a),i[f]=u):(r.push(i),i={});return r}function n(){var r,n,i,s,a,f,u,l,p,h;if(!t.dense)return null;for(n=0,p=0,h=0,t.dense.denseinfo&&(i=0,s=0,a=0,f=0),u=[],r=0;o>r;++r)n+=t.dense.id[r].toNumber(),p+=t.dense.lat[r].toNumber(),h+=t.dense.lon[r].toNumber(),l={id:n,lat:p,lon:h},t.dense.denseinfo&&(i+=t.dense.denseinfo.timestamp[r].toNumber(),s+=t.dense.denseinfo.changeset[r].toNumber(),a+=t.dense.denseinfo.uid[r],f+=t.dense.denseinfo.user_sid[r],l.timestamp=i*e.date_granularity,l.changeset=s,l.uid=a,l.userIndex=f),u.push(l);return u}function i(r){var n,i;return i=a[r],n={id:""+i.id,lat:(e.lat_offset.toNumber()+e.granularity*i.lat)/1e9,lon:(e.lon_offset.toNumber()+e.granularity*i.lon)/1e9,tags:s[r]},t.dense.denseinfo&&(n.version=t.dense.denseinfo.version[r],n.timestamp=i.timestamp,n.changeset=i.changeset,n.uid=""+i.uid,n.user=e.stringtable.getEntry(i.userIndex)),n}var o,s,a;if(0!==t.nodes.length)throw new Error("primitivegroup.nodes.length !== 0 not supported yet");return o=0,t.dense&&(o=t.dense.id.length),s=r(),a=n(),{length:o,get:i}}function f(e,t){function r(r){function n(){var t,r,n,i,s,a;for(t={},r=o.keys.length-1;r>=0;--r)n=o.keys[r],i=o.vals[r],s=e.stringtable.getEntry(n),a=e.stringtable.getEntry(i),t[s]=a;return t}function i(){var e,t,r;for(e=[],t=0,r=0;r<o.refs.length;++r)t+=o.refs[r].toNumber(),e.push(""+t);return e}var o,s,a;return o=t.ways[r],s={id:o.id.toString(),tags:n(),nodeRefs:i()},o.info&&(a=o.info,a.version&&(s.version=a.version),a.timestamp&&(s.timestamp=a.timestamp.toNumber()*e.date_granularity),a.changeset&&(s.changeset=a.changeset.toNumber()),a.uid&&(s.uid=""+a.uid),a.user_sid&&(s.user=e.stringtable.getEntry(a.user_sid))),s}var n;return n=t.ways.length,{length:n,get:r}}function u(e,t){function r(r){function n(){var t,r,n,i,s,a;for(t={},r=o.keys.length-1;r>=0;--r)n=o.keys[r],i=o.vals[r],s=e.stringtable.getEntry(n),a=e.stringtable.getEntry(i),t[s]=a;return t}function i(){var t,r,n,i,s,a;for(s=T.Relation.MemberType,t=[],n=0,i=0;i<o.memids.length;++i)r={},n+=o.memids[i].toNumber(),r.ref=""+n,r.role=e.stringtable.getEntry(o.roles_sid[i]),a=o.types[i],s.NODE===a?r.type="node":s.WAY===a?r.type="way":s.RELATION===a&&(r.type="relation"),t.push(r);return t}var o,s,a;return o=t.relations[r],s={id:o.id.toString(),tags:n(),members:i()},o.info&&(a=o.info,a.version&&(s.version=a.version),a.timestamp&&(s.timestamp=a.timestamp.toNumber()*e.date_granularity),a.changeset&&(s.changeset=a.changeset.toNumber()),a.uid&&(s.uid=""+a.uid),a.user_sid&&(s.user=e.stringtable.getEntry(a.user_sid))),s}var n;return n=t.relations.length,{length:n,get:r}}function l(e,t){t.nodesView=a(e,t),t.waysView=f(e,t),t.relationsView=u(e,t)}function p(e){var t,r;for(t=T.PrimitiveBlock.decode(e),s(t.stringtable),r=0;r<t.primitivegroup.length;++r)l(t,t.primitivegroup[r]);return t}function h(e,t){i(e,function(r,n){function i(e){var t,r,i;for(t=[],r=0;r<n.length;++r)i=n[r],i.blobHeader.type===e&&t.push(i);return t}function o(t,r){return E.readPBFElement(e,t.blobHeader.position,t.blobHeader.datasize,S.Blob.decode,r)}function s(e,t){return o(e,function(r,n){return r?t(r):0===n.raw_size?t("Uncompressed pbfs are currently not supported."):void v.inflateBlob(n,function(r,n){return r?t(r):w.readPBFElementFromBuffer(n,U[e.blobHeader.type],t)})})}return r?t(r):t(null,{fileBlocks:n,findFileBlocksByBlobType:i,readBlock:s})})}function d(e){E.open(e,function(t,r){h(r,function(t,n){return t?e.callback(t):(n.close=function(e){return E.close(r,e)},e.callback(null,n))})})}function c(){}function y(e,t){var r;for(r=0;r<e.nodesView.length;++r)t.node(e.nodesView.get(r));for(r=0;r<e.waysView.length;++r)t.way(e.waysView.get(r));for(r=0;r<e.relationsView.length;++r)t.relation(e.relationsView.get(r))}function g(e,t){var r;for(r=0;r<e.primitivegroup.length;++r)y(e.primitivegroup[r],t)}function m(e,t,r){A[e.blobHeader.type](t,r)}function b(e){return d({filePath:e.filePath,buffer:e.buffer,callback:function(t,r){function n(t){return r&&r.close(),e.error(t)}function i(){var t;return o>=r.fileBlocks.length?(r.close(),void e.endDocument()):(t=r.fileBlocks[o],void r.readBlock(t,function(r,s){return r?n(r):(m(t,s,e),o+=1,void i())}))}var o;return t?n(t):(o=0,void i())}})}{var v,w,E;e("protobufjs")}"undefined"!=typeof self?(v=e("./browser/zlib.js"),w=e("./browser/buffer.js"),E=e("./browser/arrayBufferReader.js")):(v=e("./nodejs/zlib.js"),w=e("./nodejs/buffer.js"),E=e("./nodejs/fsReader.js"));var S=e("./proto/fileformat.js"),T=e("./proto/osmformat.js"),I=4,U={OSMHeader:T.HeaderBlock.decode,OSMData:p},A={OSMHeader:c,OSMData:g};t.exports={parse:b,createParser:d}},{"./browser/arrayBufferReader.js":6,"./browser/buffer.js":7,"./browser/zlib.js":8,"./nodejs/buffer.js":9,"./nodejs/fsReader.js":10,"./nodejs/zlib.js":11,"./proto/fileformat.js":13,"./proto/osmformat.js":14,protobufjs:15}],13:[function(e,t){t.exports=e("protobufjs").newBuilder().import({"package":"OSMPBF",messages:[{name:"Blob",fields:[{rule:"optional",type:"bytes",name:"raw",id:1,options:{}},{rule:"optional",type:"int32",name:"raw_size",id:2,options:{}},{rule:"optional",type:"bytes",name:"zlib_data",id:3,options:{}},{rule:"optional",type:"bytes",name:"lzma_data",id:4,options:{}},{rule:"optional",type:"bytes",name:"OBSOLETE_bzip2_data",id:5,options:{deprecated:!0}}],enums:[],messages:[],options:{}},{name:"BlobHeader",fields:[{rule:"required",type:"string",name:"type",id:1,options:{}},{rule:"optional",type:"bytes",name:"indexdata",id:2,options:{}},{rule:"required",type:"int32",name:"datasize",id:3,options:{}}],enums:[],messages:[],options:{}}],enums:[],imports:[],options:{optimize_for:"LITE_RUNTIME",java_package:"org.openstreetmap.osmosis.osmbinary"},services:[]}).build("OSMPBF")},{protobufjs:15}],14:[function(e,t){t.exports=e("protobufjs").newBuilder().import({"package":"OSMPBF",messages:[{name:"HeaderBlock",fields:[{rule:"optional",type:"HeaderBBox",name:"bbox",id:1,options:{}},{rule:"repeated",type:"string",name:"required_features",id:4,options:{}},{rule:"repeated",type:"string",name:"optional_features",id:5,options:{}},{rule:"optional",type:"string",name:"writingprogram",id:16,options:{}},{rule:"optional",type:"string",name:"source",id:17,options:{}},{rule:"optional",type:"int64",name:"osmosis_replication_timestamp",id:32,options:{}},{rule:"optional",type:"int64",name:"osmosis_replication_sequence_number",id:33,options:{}},{rule:"optional",type:"string",name:"osmosis_replication_base_url",id:34,options:{}}],enums:[],messages:[],options:{}},{name:"HeaderBBox",fields:[{rule:"required",type:"sint64",name:"left",id:1,options:{}},{rule:"required",type:"sint64",name:"right",id:2,options:{}},{rule:"required",type:"sint64",name:"top",id:3,options:{}},{rule:"required",type:"sint64",name:"bottom",id:4,options:{}}],enums:[],messages:[],options:{}},{name:"PrimitiveBlock",fields:[{rule:"required",type:"StringTable",name:"stringtable",id:1,options:{}},{rule:"repeated",type:"PrimitiveGroup",name:"primitivegroup",id:2,options:{}},{rule:"optional",type:"int32",name:"granularity",id:17,options:{"default":100}},{rule:"optional",type:"int64",name:"lat_offset",id:19,options:{"default":0}},{rule:"optional",type:"int64",name:"lon_offset",id:20,options:{"default":0}},{rule:"optional",type:"int32",name:"date_granularity",id:18,options:{"default":1e3}}],enums:[],messages:[],options:{}},{name:"PrimitiveGroup",fields:[{rule:"repeated",type:"Node",name:"nodes",id:1,options:{}},{rule:"optional",type:"DenseNodes",name:"dense",id:2,options:{}},{rule:"repeated",type:"Way",name:"ways",id:3,options:{}},{rule:"repeated",type:"Relation",name:"relations",id:4,options:{}},{rule:"repeated",type:"ChangeSet",name:"changesets",id:5,options:{}}],enums:[],messages:[],options:{}},{name:"StringTable",fields:[{rule:"repeated",type:"bytes",name:"s",id:1,options:{}}],enums:[],messages:[],options:{}},{name:"Info",fields:[{rule:"optional",type:"int32",name:"version",id:1,options:{"default":-1}},{rule:"optional",type:"int64",name:"timestamp",id:2,options:{}},{rule:"optional",type:"int64",name:"changeset",id:3,options:{}},{rule:"optional",type:"int32",name:"uid",id:4,options:{}},{rule:"optional",type:"uint32",name:"user_sid",id:5,options:{}},{rule:"optional",type:"bool",name:"visible",id:6,options:{}}],enums:[],messages:[],options:{}},{name:"DenseInfo",fields:[{rule:"repeated",type:"int32",name:"version",id:1,options:{packed:!0}},{rule:"repeated",type:"sint64",name:"timestamp",id:2,options:{packed:!0}},{rule:"repeated",type:"sint64",name:"changeset",id:3,options:{packed:!0}},{rule:"repeated",type:"sint32",name:"uid",id:4,options:{packed:!0}},{rule:"repeated",type:"sint32",name:"user_sid",id:5,options:{packed:!0}},{rule:"repeated",type:"bool",name:"visible",id:6,options:{packed:!0}}],enums:[],messages:[],options:{}},{name:"ChangeSet",fields:[{rule:"required",type:"int64",name:"id",id:1,options:{}}],enums:[],messages:[],options:{}},{name:"Node",fields:[{rule:"required",type:"sint64",name:"id",id:1,options:{}},{rule:"repeated",type:"uint32",name:"keys",id:2,options:{packed:!0}},{rule:"repeated",type:"uint32",name:"vals",id:3,options:{packed:!0}},{rule:"optional",type:"Info",name:"info",id:4,options:{}},{rule:"required",type:"sint64",name:"lat",id:8,options:{}},{rule:"required",type:"sint64",name:"lon",id:9,options:{}}],enums:[],messages:[],options:{}},{name:"DenseNodes",fields:[{rule:"repeated",type:"sint64",name:"id",id:1,options:{packed:!0}},{rule:"optional",type:"DenseInfo",name:"denseinfo",id:5,options:{}},{rule:"repeated",type:"sint64",name:"lat",id:8,options:{packed:!0}},{rule:"repeated",type:"sint64",name:"lon",id:9,options:{packed:!0}},{rule:"repeated",type:"int32",name:"keys_vals",id:10,options:{packed:!0}}],enums:[],messages:[],options:{}},{name:"Way",fields:[{rule:"required",type:"int64",name:"id",id:1,options:{}},{rule:"repeated",type:"uint32",name:"keys",id:2,options:{packed:!0}},{rule:"repeated",type:"uint32",name:"vals",id:3,options:{packed:!0}},{rule:"optional",type:"Info",name:"info",id:4,options:{}},{rule:"repeated",type:"sint64",name:"refs",id:8,options:{packed:!0}}],enums:[],messages:[],options:{}},{name:"Relation",fields:[{rule:"required",type:"int64",name:"id",id:1,options:{}},{rule:"repeated",type:"uint32",name:"keys",id:2,options:{packed:!0}},{rule:"repeated",type:"uint32",name:"vals",id:3,options:{packed:!0}},{rule:"optional",type:"Info",name:"info",id:4,options:{}},{rule:"repeated",type:"int32",name:"roles_sid",id:8,options:{packed:!0}},{rule:"repeated",type:"sint64",name:"memids",id:9,options:{packed:!0}},{rule:"repeated",type:"MemberType",name:"types",id:10,options:{packed:!0}}],enums:[{name:"MemberType",values:[{name:"NODE",id:0},{name:"WAY",id:1},{name:"RELATION",id:2}],options:{}}],messages:[],options:{}}],enums:[],imports:[],options:{optimize_for:"LITE_RUNTIME",java_package:"org.openstreetmap.osmosis.osmbinary"},services:[]}).build("OSMPBF")
},{protobufjs:15}],15:[function(t,r){!function(n){function i(e){var r={VERSION:"2.0.5",WIRE_TYPES:{}};return r.WIRE_TYPES.VARINT=0,r.WIRE_TYPES.BITS64=1,r.WIRE_TYPES.LDELIM=2,r.WIRE_TYPES.STARTGROUP=3,r.WIRE_TYPES.ENDGROUP=4,r.WIRE_TYPES.BITS32=5,r.TYPES={int32:{name:"int32",wireType:r.WIRE_TYPES.VARINT},uint32:{name:"uint32",wireType:r.WIRE_TYPES.VARINT},sint32:{name:"sint32",wireType:r.WIRE_TYPES.VARINT},int64:{name:"int64",wireType:r.WIRE_TYPES.VARINT},uint64:{name:"uint64",wireType:r.WIRE_TYPES.VARINT},sint64:{name:"sint64",wireType:r.WIRE_TYPES.VARINT},bool:{name:"bool",wireType:r.WIRE_TYPES.VARINT},"double":{name:"double",wireType:r.WIRE_TYPES.BITS64},string:{name:"string",wireType:r.WIRE_TYPES.LDELIM},bytes:{name:"bytes",wireType:r.WIRE_TYPES.LDELIM},fixed32:{name:"fixed32",wireType:r.WIRE_TYPES.BITS32},sfixed32:{name:"sfixed32",wireType:r.WIRE_TYPES.BITS32},fixed64:{name:"fixed64",wireType:r.WIRE_TYPES.BITS64},sfixed64:{name:"sfixed64",wireType:r.WIRE_TYPES.BITS64},"float":{name:"float",wireType:r.WIRE_TYPES.BITS32},"enum":{name:"enum",wireType:r.WIRE_TYPES.VARINT},message:{name:"message",wireType:r.WIRE_TYPES.LDELIM}},r.Long=e.Long,r.convertFieldsToCamelCase=!1,r.Util=function(){Object.create||(Object.create=function(e){function t(){}if(1<arguments.length)throw Error("Object.create implementation only accepts the first parameter.");return t.prototype=e,new t});var e={};return e.IS_NODE=("undefined"==typeof window||!window.window)&&"function"==typeof t&&"undefined"!=typeof process&&"function"==typeof process.nextTick,e.XHR=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,r=0;r<e.length;r++){try{t=e[r]()}catch(n){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},e.fetch=function(r,n){if(n&&"function"!=typeof n&&(n=null),e.IS_NODE)if(n)t("fs").readFile(r,function(e,t){n(e?null:""+t)});else try{return t("fs").readFileSync(r)}catch(i){return null}else{var o=e.XHR();if(o.open("GET",r,n?!0:!1),o.setRequestHeader("Accept","text/plain"),"function"==typeof o.overrideMimeType&&o.overrideMimeType("text/plain"),!n)return o.send(null),200==o.status||0==o.status&&"string"==typeof o.responseText?o.responseText:null;o.onreadystatechange=function(){4==o.readyState&&n(200==o.status||0==o.status&&"string"==typeof o.responseText?o.responseText:null)},4!=o.readyState&&o.send(null)}},e.isArray=function(e){return e?e instanceof Array?!0:Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e):!1},e}(),r.Lang={OPEN:"{",CLOSE:"}",OPTOPEN:"[",OPTCLOSE:"]",OPTEND:",",EQUAL:"=",END:";",STRINGOPEN:'"',STRINGCLOSE:'"',COPTOPEN:"(",COPTCLOSE:")",DELIM:/[\s\{\}=;\[\],"\(\)]/g,KEYWORD:/^(?:package|option|import|message|enum|extend|service|syntax|extensions)$/,RULE:/^(?:required|optional|repeated)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z][a-zA-Z_0-9]*$/,OPTNAME:/^(?:[a-zA-Z][a-zA-Z_0-9]*|\([a-zA-Z][a-zA-Z_0-9]*\))$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|[0-9]*\.[0-9]+)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0x[0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^[0-9]*\.[0-9]+$/,ID:/^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/"([^"\\]*(\\.[^"\\]*)*)"/g,BOOL:/^(?:true|false)$/i,ID_MIN:1,ID_MAX:536870911},r.Reflect=function(t){var r={},n=function(e,t){this.parent=e,this.name=t};n.prototype.fqn=function(){for(var e=this.name,t=this;;){if(t=t.parent,null==t)break;e=t.name+"."+e}return e},n.prototype.toString=function(e){var t=this.fqn();return e&&(this instanceof o?t="Message "+t:this instanceof o.Field?t="Message.Field "+t:this instanceof a?t="Enum "+t:this instanceof a.Value?t="Enum.Value "+t:this instanceof f?t="Service "+t:this instanceof f.Method?t=this instanceof f.RPCMethod?"Service.RPCMethod "+t:"Service.Method "+t:this instanceof i&&(t="Namespace "+t)),t},n.prototype.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},r.T=n;var i=function(e,t,r){n.call(this,e,t),this.children=[],this.options=r||{}};i.prototype=Object.create(n.prototype),i.prototype.getChildren=function(e){if(e=e||null,null==e)return this.children.slice();for(var t=[],r=0;r<this.children.length;r++)this.children[r]instanceof e&&t.push(this.children[r]);return t},i.prototype.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof o.Field&&t.name!==t.originalName&&!this.hasChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof o.Field&&e.name!==e.originalName)||this.hasChild(e.originalName))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},i.prototype.hasChild=function(e){var t;if("number"==typeof e){for(t=0;t<this.children.length;t++)if("undefined"!=typeof this.children[t].id&&this.children[t].id==e)return!0}else for(t=0;t<this.children.length;t++)if("undefined"!=typeof this.children[t].name&&this.children[t].name==e)return!0;return!1},i.prototype.getChild=function(e){var t;if("number"==typeof e){for(t=0;t<this.children.length;t++)if("undefined"!=typeof this.children[t].id&&this.children[t].id==e)return this.children[t]}else for(t=0;t<this.children.length;t++)if("undefined"!=typeof this.children[t].name&&this.children[t].name==e)return this.children[t];return null},i.prototype.resolve=function(e,t){var n=e.split("."),i=this,o=0;if(""==n[o]){for(;null!=i.parent;)i=i.parent;o++}do{do{if(i=i.getChild(n[o]),!(i&&i instanceof r.T)||t&&i instanceof r.Message.Field){i=null;break}o++}while(o<n.length);if(null!=i)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=i);return i},i.prototype.build=function(){for(var e,t={},r=this.getChildren(),n=0;n<r.length;n++)e=r[n],e instanceof i&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),t},i.prototype.buildOpt=function(){for(var e={},t=Object.keys(this.options),r=0;r<t.length;r++)e[t[r]]=this.options[t[r]];return e},i.prototype.getOption=function(e){return"undefined"==typeof e?this.options:"undefined"!=typeof this.options[e]?this.options[e]:null},r.Namespace=i;var o=function(e,r,n){i.call(this,e,r,n),this.extensions=[t.Lang.ID_MIN,t.Lang.ID_MAX],this.clazz=null};o.prototype=Object.create(i.prototype),o.prototype.build=function(n){if(this.clazz&&!n)return this.clazz;n=function(t,n){var i=n.getChildren(r.Message.Field),o=function(r){t.Builder.Message.call(this);var n,o;for(n=0;n<i.length;n++)o=i[n],this[o.name]=o.repeated?[]:null;for(n=0;n<i.length;n++)if(o=i[n],"undefined"!=typeof o.options["default"])try{this.set(o.name,o.options["default"])}catch(s){throw Error("[INTERNAL] "+s)}if(1!=arguments.length||"object"!=typeof r||"function"==typeof r.encode||t.Util.isArray(r)||r instanceof e||r instanceof ArrayBuffer||t.Long&&r instanceof t.Long)for(n=0;n<arguments.length;n++)n<i.length&&this.set(i[n].name,arguments[n]);else for(o=Object.keys(r),n=0;n<o.length;n++)this.set(o[n],r[o[n]])};o.prototype=Object.create(t.Builder.Message.prototype),o.prototype.add=function(e,r){var i=n.getChild(e);if(!i)throw Error(this+"#"+e+" is undefined");if(!(i instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+i.toString(!0));if(!i.repeated)throw Error(this+"#"+e+" is not a repeated field");null===this[i.name]&&(this[i.name]=[]),this[i.name].push(i.verifyValue(r,!0))},o.prototype.set=function(e,r){var i=n.getChild(e);if(!i)throw Error(this+"#"+e+" is not a field: undefined");if(!(i instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+i.toString(!0));this[i.name]=i.verifyValue(r)},o.prototype.get=function(e){var r=n.getChild(e);if(!(r&&r instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: undefined");if(!(r instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+r.toString(!0));return this[r.name]};for(var s=0;s<i.length;s++)(function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")}),t=t.substring(0,1).toUpperCase()+t.substring(1),r=e.originalName.replace(/([A-Z])/g,function(e){return"_"+e});n.hasChild("set"+t)||(o.prototype["set"+t]=function(t){this.set(e.name,t)}),n.hasChild("set_"+r)||(o.prototype["set_"+r]=function(t){this.set(e.name,t)}),n.hasChild("get"+t)||(o.prototype["get"+t]=function(){return this.get(e.name)}),n.hasChild("get_"+r)||(o.prototype["get_"+r]=function(){return this.get(e.name)})})(i[s]);return o.prototype.encode=function(t){t=t||new e;var r=t.littleEndian;try{return n.encode(this,t.LE()).flip().LE(r)}catch(i){throw t.LE(r),i}},o.prototype.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},o.prototype.toArrayBuffer=o.prototype.encodeAB,o.prototype.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},o.prototype.toBuffer=o.prototype.encodeNB,o.prototype.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},o.prototype.toBase64=o.prototype.encode64,o.prototype.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},o.prototype.toHex=o.prototype.encodeHex,o.decode=function(t,r){if(null===t)throw Error("buffer must not be null");"string"==typeof t&&(t=e.wrap(t,r?r:"base64")),t=t instanceof e?t:e.wrap(t);var i=t.littleEndian;try{var o=n.decode(t.LE());return t.LE(i),o}catch(s){throw t.LE(i),s}},o.decode64=function(e){return o.decode(e,"base64")},o.decodeHex=function(e){return o.decode(e,"hex")},o.prototype.toString=function(){return n.toString()},Object.defineProperty&&Object.defineProperty(o,"$options",{value:n.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),o}(t,this);for(var i=this.getChildren(),s=0;s<i.length;s++)if(i[s]instanceof a)n[i[s].name]=i[s].build();else if(i[s]instanceof o)n[i[s].name]=i[s].build();else if(!(i[s]instanceof o.Field))throw Error("Illegal reflect child of "+this.toString(!0)+": "+i[s].toString(!0));return this.clazz=n},o.prototype.encode=function(e,t){for(var r=this.getChildren(o.Field),n=null,i=0;i<r.length;i++){var s=e.get(r[i].name);r[i].required&&null===s?null===n&&(n=r[i]):r[i].encode(s,t)}if(null!==n)throw r=Error("Missing at least one required field for "+this.toString(!0)+": "+n),r.encoded=t,r;return t},o.prototype.decode=function(e,r){r="number"==typeof r?r:-1;for(var n=e.offset,i=new this.clazz;e.offset<n+r||-1==r&&0<e.remaining();){var o=e.readVarint32(),s=7&o,o=o>>3,a=this.getChild(o);if(a)a.repeated&&!a.options.packed?i.add(a.name,a.decode(s,e)):i.set(a.name,a.decode(s,e));else switch(s){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:s=e.readVarint32(),e.offset+=s;break;default:throw Error("Illegal wire type of unknown field "+o+" in "+this.toString(!0)+"#decode: "+s)}}for(n=this.getChildren(t.Reflect.Field),s=0;s<n.length;s++)if(n[s].required&&null===i[n[s].name])throw n=Error("Missing at least one required field for "+this.toString(!0)+": "+n[s].name),n.decoded=i,n;return i},r.Message=o;var s=function(e,r,i,o,s,a){n.call(this,e,o),this.required="required"==r,this.repeated="repeated"==r,this.type=i,this.resolvedType=null,this.id=s,this.options=a||{},this.originalName=this.name,t.convertFieldsToCamelCase&&(this.name=this.name.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()}))};s.prototype=Object.create(n.prototype),s.prototype.verifyValue=function(r,n){if(n=n||!1,null===r){if(this.required)throw Error("Illegal value for "+this.toString(!0)+": "+r+" (required)");return null}var i;if(this.repeated&&!n){t.Util.isArray(r)||(r=[r]);var o=[];for(i=0;i<r.length;i++)o.push(this.verifyValue(r[i],!0));return o}if(!this.repeated&&t.Util.isArray(r))throw Error("Illegal value for "+this.toString(!0)+": "+r+" (no array expected)");if(this.type==t.TYPES.int32||this.type==t.TYPES.sint32||this.type==t.TYPES.sfixed32)return isNaN(i=parseInt(r,10))?i:0|i;if(this.type==t.TYPES.uint32||this.type==t.TYPES.fixed32)return isNaN(i=parseInt(r,10))?i:i>>>0;if(t.Long){if(this.type==t.TYPES.int64||this.type==t.TYPES.sint64||this.type==t.TYPES.sfixed64)return"object"==typeof r&&r instanceof t.Long?r.unsigned?r.toSigned():r:t.Long.fromNumber(r,!1);if(this.type==t.TYPES.uint64||this.type==t.TYPES.fixed64)return"object"==typeof r&&r instanceof t.Long?r.unsigned?r:r.toUnsigned():t.Long.fromNumber(r,!0)}if(this.type==t.TYPES.bool)return"string"==typeof r?"true"===r:!!r;if(this.type==t.TYPES["float"]||this.type==t.TYPES["double"])return parseFloat(r);if(this.type==t.TYPES.string)return""+r;if(this.type==t.TYPES.bytes)return r&&r instanceof e?r:e.wrap(r);if(this.type==t.TYPES["enum"]){for(o=this.resolvedType.getChildren(a.Value),i=0;i<o.length;i++)if(o[i].name==r||o[i].id==r)return o[i].id;throw Error("Illegal value for "+this.toString(!0)+": "+r+" (not a valid enum value)")}if(this.type==t.TYPES.message){if("object"!=typeof r)throw Error("Illegal value for "+this.toString(!0)+": "+r+" (object expected)");return r instanceof this.resolvedType.clazz?r:new this.resolvedType.clazz(r)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+r+" (undefined type "+this.type+")")},s.prototype.encode=function(r,n){if(r=this.verifyValue(r),null==this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return n;try{if(this.repeated){var i;if(this.options.packed){n.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),n.ensureCapacity(n.offset+=1);var o=n.offset;for(i=0;i<r.length;i++)this.encodeValue(r[i],n);var s=n.offset-o,a=e.calculateVarint32(s);if(a>1){var f=n.slice(o,n.offset),o=o+(a-1);n.offset=o,n.append(f)}n.writeVarint32(s,o-a)}else for(i=0;i<r.length;i++)n.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(r[i],n)}else n.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(r,n)}catch(u){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+u+")")}return n},s.prototype.encodeValue=function(r,n){if(null!==r){if(this.type==t.TYPES.int32||this.type==t.TYPES.uint32)n.writeVarint32(r);else if(this.type==t.TYPES.sint32)n.writeZigZagVarint32(r);else if(this.type==t.TYPES.fixed32)n.writeUint32(r);else if(this.type==t.TYPES.sfixed32)n.writeInt32(r);else if(this.type==t.TYPES.int64||this.type==t.TYPES.uint64)n.writeVarint64(r);else if(this.type==t.TYPES.sint64)n.writeZigZagVarint64(r);else if(this.type==t.TYPES.fixed64)n.writeUint64(r);else if(this.type==t.TYPES.sfixed64)n.writeInt64(r);else if(this.type==t.TYPES.bool)n.writeVarint32("string"==typeof r?"false"===r.toLowerCase()?0:!!r:r?1:0);else if(this.type==t.TYPES["enum"])n.writeVarint32(r);else if(this.type==t.TYPES["float"])n.writeFloat32(r);else if(this.type==t.TYPES["double"])n.writeFloat64(r);else if(this.type==t.TYPES.string)n.writeVString(r);else if(this.type==t.TYPES.bytes)r.offset>r.length&&(n=n.clone().flip()),n.writeVarint32(r.remaining()),n.append(r);else{if(this.type!=t.TYPES.message)throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)");var i=(new e).LE();this.resolvedType.encode(r,i),n.writeVarint32(i.offset),n.append(i.flip())}return n}},s.prototype.decode=function(e,r,n){if(e!=this.type.wireType&&(n||e!=t.WIRE_TYPES.LDELIM||!this.repeated))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.wireType+" expected)");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&!n){for(e=r.readVarint32(),e=r.offset+e,n=[];r.offset<e;)n.push(this.decode(this.type.wireType,r,!0));return n}if(this.type==t.TYPES.int32)return 0|r.readVarint32();if(this.type==t.TYPES.uint32)return r.readVarint32()>>>0;if(this.type==t.TYPES.sint32)return 0|r.readZigZagVarint32();if(this.type==t.TYPES.fixed32)return r.readUint32()>>>0;if(this.type==t.TYPES.sfixed32)return 0|r.readInt32();if(this.type==t.TYPES.int64)return r.readVarint64();if(this.type==t.TYPES.uint64)return r.readVarint64().toUnsigned();if(this.type==t.TYPES.sint64)return r.readZigZagVarint64();if(this.type==t.TYPES.fixed64)return r.readUint64();if(this.type==t.TYPES.sfixed64)return r.readInt64();if(this.type==t.TYPES.bool)return!!r.readVarint32();if(this.type==t.TYPES["enum"])return r.readVarint32();if(this.type==t.TYPES["float"])return r.readFloat();if(this.type==t.TYPES["double"])return r.readDouble();if(this.type==t.TYPES.string)return r.readVString();if(this.type==t.TYPES.bytes){if(e=r.readVarint32(),r.remaining()<e)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+e+" required but got only "+r.remaining());return n=r.clone(),n.length=n.offset+e,r.offset+=e,n}if(this.type==t.TYPES.message)return e=r.readVarint32(),this.resolvedType.decode(r,e);throw Error("[INTERNAL] Illegal wire type for "+this.toString(!0)+": "+e)},r.Message.Field=s;var a=function(e,t,r){i.call(this,e,t,r),this.object=null};a.prototype=Object.create(i.prototype),a.prototype.build=function(){for(var e={},t=this.getChildren(a.Value),r=0;r<t.length;r++)e[t[r].name]=t[r].id;return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),this.object=e},r.Enum=a,s=function(e,t,r){n.call(this,e,t),this.id=r},s.prototype=Object.create(n.prototype),r.Enum.Value=s;var f=function(e,t,r){i.call(this,e,t,r),this.clazz=null};f.prototype=Object.create(i.prototype),f.prototype.build=function(e){return this.clazz&&!e?this.clazz:this.clazz=function(e,t){var n=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,r){setTimeout(r.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}};n.prototype=Object.create(e.Builder.Service.prototype),Object.defineProperty&&(Object.defineProperty(n,"$options",{value:t.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(n.prototype,"$options",{value:n.$options,enumerable:!1,configurable:!1,writable:!1}));for(var i=t.getChildren(r.Service.RPCMethod),o=0;o<i.length;o++)(function(e){n.prototype[e.name]=function(r,n){try{r&&r instanceof e.resolvedRequestType.clazz||setTimeout(n.bind(this,Error("Illegal request type provided to service method "+t.name+"#"+e.name))),this.rpcImpl(e.fqn(),r,function(r,i){if(r)n(r);else{try{i=e.resolvedResponseType.clazz.decode(i)}catch(o){}i&&i instanceof e.resolvedResponseType.clazz?n(null,i):n(Error("Illegal response type received in service method "+t.name+"#"+e.name))}})}catch(i){setTimeout(n.bind(this,i),0)}},n[e.name]=function(t,r,i){new n(t)[e.name](r,i)},Object.defineProperty&&(Object.defineProperty(n[e.name],"$options",{value:e.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(n.prototype[e.name],"$options",{value:n[e.name].$options,enumerable:!1,configurable:!1,writable:!1}))})(i[o]);return n}(t,this)},r.Service=f;var u=function(e,t,r){n.call(this,e,t),this.options=r||{}};return u.prototype=Object.create(n.prototype),u.prototype.buildOpt=i.prototype.buildOpt,r.Service.Method=u,s=function(e,t,r,n,i){u.call(this,e,t,i),this.requestName=r,this.responseName=n,this.resolvedResponseType=this.resolvedRequestType=null},s.prototype=Object.create(u.prototype),r.Service.RPCMethod=s,r}(r),r.Builder=function(e,r,n){var i=function(){this.ptr=this.ns=new n.Namespace(null,""),this.resolved=!1,this.result=null,this.files={},this.importRoot=null};return i.prototype.reset=function(){this.ptr=this.ns},i.prototype.define=function(e,t){if("string"!=typeof e||!r.TYPEREF.test(e))throw Error("Illegal package name: "+e);var i,o=e.split(".");for(i=0;i<o.length;i++)if(!r.NAME.test(o[i]))throw Error("Illegal package name: "+o[i]);for(i=0;i<o.length;i++)this.ptr.hasChild(o[i])||this.ptr.addChild(new n.Namespace(this.ptr,o[i],t)),this.ptr=this.ptr.getChild(o[i]);return this},i.isValidMessage=function(t){if("string"!=typeof t.name||!r.NAME.test(t.name)||"undefined"!=typeof t.values||"undefined"!=typeof t.rpc)return!1;var n;if("undefined"!=typeof t.fields){if(!e.Util.isArray(t.fields))return!1;var o,s=[];for(n=0;n<t.fields.length;n++){if(!i.isValidMessageField(t.fields[n]))return!1;if(o=parseInt(t.id,10),0<=s.indexOf(o))return!1;s.push(o)}}if("undefined"!=typeof t.enums){if(!e.Util.isArray(t.enums))return!1;for(n=0;n<t.enums.length;n++)if(!i.isValidEnum(t.enums[n]))return!1}if("undefined"!=typeof t.messages){if(!e.Util.isArray(t.messages))return!1;for(n=0;n<t.messages.length;n++)if(!i.isValidMessage(t.messages[n])&&!i.isValidExtend(t.messages[n]))return!1}return"undefined"==typeof t.extensions||e.Util.isArray(t.extensions)&&2===t.extensions.length&&"number"==typeof t.extensions[0]&&"number"==typeof t.extensions[1]?!0:!1},i.isValidMessageField=function(e){if("string"!=typeof e.rule||"string"!=typeof e.name||"string"!=typeof e.type||"undefined"==typeof e.id||!(r.RULE.test(e.rule)&&r.NAME.test(e.name)&&r.TYPEREF.test(e.type)&&r.ID.test(""+e.id)))return!1;if("undefined"!=typeof e.options){if("object"!=typeof e.options)return!1;for(var t=Object.keys(e.options),n=0;n<t.length;n++)if(!r.OPTNAME.test(t[n])||"string"!=typeof e.options[t[n]]&&"number"!=typeof e.options[t[n]]&&"boolean"!=typeof e.options[t[n]])return!1}return!0},i.isValidEnum=function(t){if("string"!=typeof t.name||!r.NAME.test(t.name)||"undefined"==typeof t.values||!e.Util.isArray(t.values)||0==t.values.length)return!1;for(var n=0;n<t.values.length;n++)if("object"!=typeof t.values[n]||"string"!=typeof t.values[n].name||"undefined"==typeof t.values[n].id||!r.NAME.test(t.values[n].name)||!r.NEGID.test(""+t.values[n].id))return!1;return!0},i.prototype.create=function(t){if(t&&(e.Util.isArray(t)||(t=[t]),0!=t.length)){var o,s,a,f,u,l=[];for(l.push(t);0<l.length;){if(t=l.pop(),!e.Util.isArray(t))throw Error("Not a valid namespace definition: "+JSON.stringify(t));for(;0<t.length;)if(o=t.shift(),i.isValidMessage(o)){if(s=new n.Message(this.ptr,o.name,o.options),o.fields&&0<o.fields.length)for(f=0;f<o.fields.length;f++){if(s.hasChild(o.fields[f].id))throw Error("Duplicate field id in message "+s.name+": "+o.fields[f].id);if(o.fields[f].options)for(a=Object.keys(o.fields[f].options),u=0;u<a.length;u++){if(!r.OPTNAME.test(a[u]))throw Error("Illegal field option name in message "+s.name+"#"+o.fields[f].name+": "+a[u]);if("string"!=typeof o.fields[f].options[a[u]]&&"number"!=typeof o.fields[f].options[a[u]]&&"boolean"!=typeof o.fields[f].options[a[u]])throw Error("Illegal field option value in message "+s.name+"#"+o.fields[f].name+"#"+a[u]+": "+o.fields[f].options[a[u]])}s.addChild(new n.Message.Field(s,o.fields[f].rule,o.fields[f].type,o.fields[f].name,o.fields[f].id,o.fields[f].options))}if(a=[],"undefined"!=typeof o.enums&&0<o.enums.length)for(f=0;f<o.enums.length;f++)a.push(o.enums[f]);if(o.messages&&0<o.messages.length)for(f=0;f<o.messages.length;f++)a.push(o.messages[f]);o.extensions&&(s.extensions=o.extensions,s.extensions[0]<e.Lang.ID_MIN&&(s.extensions[0]=e.Lang.ID_MIN),s.extensions[1]>e.Lang.ID_MAX&&(s.extensions[1]=e.Lang.ID_MAX)),this.ptr.addChild(s),0<a.length&&(l.push(t),t=a,this.ptr=s)}else if(i.isValidEnum(o)){for(s=new n.Enum(this.ptr,o.name,o.options),f=0;f<o.values.length;f++)s.addChild(new n.Enum.Value(s,o.values[f].name,o.values[f].id));this.ptr.addChild(s)}else if(i.isValidService(o)){s=new n.Service(this.ptr,o.name,o.options);for(f in o.rpc)o.rpc.hasOwnProperty(f)&&s.addChild(new n.Service.RPCMethod(s,f,o.rpc[f].request,o.rpc[f].response,o.rpc[f].options));this.ptr.addChild(s)}else{if(!i.isValidExtend(o))throw Error("Not a valid message, enum, service or extend definition: "+JSON.stringify(o));if(s=this.ptr.resolve(o.ref))for(f=0;f<o.fields.length;f++){if(s.hasChild(o.fields[f].id))throw Error("Duplicate extended field id in message "+s.name+": "+o.fields[f].id);if(o.fields[f].id<s.extensions[0]||o.fields[f].id>s.extensions[1])throw Error("Illegal extended field id in message "+s.name+": "+o.fields[f].id+" ("+s.extensions.join(" to ")+" expected)");s.addChild(new n.Message.Field(s,o.fields[f].rule,o.fields[f].type,o.fields[f].name,o.fields[f].id,o.fields[f].options))}else if(!/\.?google\.protobuf\./.test(o.ref))throw Error("Extended message "+o.ref+" is not defined")}this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this}},i.isValidImport=function(e){return!/google\/protobuf\//.test(e)},i.prototype["import"]=function(r,n){if("string"==typeof n){if(e.Util.IS_NODE&&(n=t("path").resolve(n)),this.files[n])return this.reset(),this;this.files[n]=!0}if(r.imports&&0<r.imports.length){var o,s="/",a=!1;"object"==typeof n?(this.importRoot=n.root,a=!0,o=this.importRoot,n=n.file,(0<=o.indexOf("\\")||0<=n.indexOf("\\"))&&(s="\\")):"string"==typeof n?this.importRoot?o=this.importRoot:0<=n.indexOf("/")?(o=n.replace(/\/[^\/]*$/,""),""===o&&(o="/")):0<=n.indexOf("\\")?(o=n.replace(/\\[^\\]*$/,""),s="\\"):o=".":o=null;for(var f=0;f<r.imports.length;f++)if("string"==typeof r.imports[f]){if(!o)throw Error("Cannot determine import root: File name is unknown");var u=o+s+r.imports[f];if(i.isValidImport(u)){/\.proto$/i.test(u)&&!e.DotProto&&(u=u.replace(/\.proto$/,".json"));var l=e.Util.fetch(u);if(null===l)throw Error("Failed to import '"+u+"' in '"+n+"': File not found");/\.json$/i.test(u)?this["import"](JSON.parse(l+""),u):this["import"](new e.DotProto.Parser(l+"").parse(),u)}}else n?/\.(\w+)$/.test(n)?this["import"](r.imports[f],n.replace(/^(.+)\.(\w+)$/,function(e,t,r){return t+"_import"+f+"."+r})):this["import"](r.imports[f],n+"_import"+f):this["import"](r.imports[f]);a&&(this.importRoot=null)}return r.messages&&(r["package"]&&this.define(r["package"],r.options),this.create(r.messages),this.reset()),r.enums&&(r["package"]&&this.define(r["package"],r.options),this.create(r.enums),this.reset()),r.services&&(r["package"]&&this.define(r["package"],r.options),this.create(r.services),this.reset()),r["extends"]&&(r["package"]&&this.define(r["package"],r.options),this.create(r["extends"]),this.reset()),this},i.isValidService=function(e){return"string"==typeof e.name&&r.NAME.test(e.name)&&"object"==typeof e.rpc?!0:!1},i.isValidExtend=function(t){if("string"!=typeof t.ref||!r.TYPEREF.test(t.name))return!1;var n;if("undefined"!=typeof t.fields){if(!e.Util.isArray(t.fields))return!1;var o,s=[];for(n=0;n<t.fields.length;n++){if(!i.isValidMessageField(t.fields[n]))return!1;if(o=parseInt(t.id,10),0<=s.indexOf(o))return!1;s.push(o)}}return!0},i.prototype.resolveAll=function(){var t;if(null!=this.ptr&&"object"!=typeof this.ptr.type){if(this.ptr instanceof n.Namespace){t=this.ptr.getChildren();for(var i=0;i<t.length;i++)this.ptr=t[i],this.resolveAll()}else if(this.ptr instanceof n.Message.Field)if(r.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!r.TYPEREF.test(this.ptr.type))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(t=this.ptr.parent.resolve(this.ptr.type,!0),!t)throw Error("Unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=t,t instanceof n.Enum)this.ptr.type=e.TYPES["enum"];else{if(!(t instanceof n.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=e.TYPES.message}}else if(!(this.ptr instanceof e.Reflect.Enum.Value)){if(!(this.ptr instanceof e.Reflect.Service.Method))throw Error("Illegal object type in namespace: "+typeof this.ptr+":"+this.ptr);if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("Illegal service method type in "+this.ptr.toString(!0));if(t=this.ptr.parent.resolve(this.ptr.requestName),!(t&&t instanceof e.Reflect.Message))throw Error("Illegal request type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=t,t=this.ptr.parent.resolve(this.ptr.responseName),!(t&&t instanceof e.Reflect.Message))throw Error("Illegal response type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=t}this.reset()}},i.prototype.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null==this.result&&(this.result=this.ns.build()),e){e=e.split(".");for(var t=this.result,r=0;r<e.length;r++){if(!t[e[r]]){t=null;break}t=t[e[r]]}return t}return this.result},i.prototype.lookup=function(e){return e?this.ns.resolve(e):this.ns},i.prototype.toString=function(){return"Builder"},i.Message=function(){},i.Service=function(){},i}(r,r.Lang,r.Reflect),r.newBuilder=function(e,t){var n=new r.Builder;return"undefined"!=typeof e&&null!==e&&n.define(e,t),n},r.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"==typeof t||(t=r.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t["import"](e,n),t.resolveAll(),t.build(),t},r.loadJsonFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),!t){var i=r.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null!==i?r.loadJson(JSON.parse(i),n,e):null}r.Util.fetch("object"==typeof e?e.root+"/"+e.file:e,function(i){try{t(r.loadJson(JSON.parse(i),n,e))}catch(o){t(o)}})},r}"undefined"!=typeof r&&r.exports?r.exports=i(t("bytebuffer")):"undefined"!=typeof e&&e.amd?e("ProtoBuf",["ByteBuffer"],i):(n.dcodeIO||(n.dcodeIO={}),n.dcodeIO.ProtoBuf=i(n.dcodeIO.ByteBuffer))}(this)},{bytebuffer:16}],16:[function(t,r){!function(n){"use strict";function i(e){function r(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0,i=e.length;i>n;++n)r[n]=e[n];return t}var n=null;if("function"==typeof t)try{var i=t("buffer");n=i&&"function"==typeof i.Buffer&&"function"==typeof i.Buffer.isBuffer?i.Buffer:null}catch(o){}var s=function(e,t,r){e="undefined"!=typeof e?parseInt(e,10):s.DEFAULT_CAPACITY,1>e&&(e=s.DEFAULT_CAPACITY),this.array=r?null:new ArrayBuffer(e),this.view=r?null:new DataView(this.array),this.offset=0,this.markedOffset=-1,this.length=0,this.littleEndian="undefined"!=typeof t?!!t:!1};s.VERSION="2.3.1",s.DEFAULT_CAPACITY=16,s.LITTLE_ENDIAN=!0,s.BIG_ENDIAN=!1,s.Long=e||null,s.isByteBuffer=function(e){return e&&(e instanceof s||"object"==typeof e&&(null===e.array||e.array instanceof ArrayBuffer)&&(null===e.view||e.view instanceof DataView)&&"number"==typeof e.offset&&"number"==typeof e.markedOffset&&"number"==typeof e.length&&"boolean"==typeof e.littleEndian)},s.allocate=function(e,t){return new s(e,t)},s.wrap=function(e,t,i){if("boolean"==typeof t&&(i=t,t="utf8"),"string"==typeof e)switch(t){case"base64":return s.decode64(e,i);case"hex":return s.decodeHex(e,i);case"binary":return s.decodeBinary(e,i);default:return new s(s.DEFAULT_CAPACITY,i).writeUTF8String(e).flip()}var o;if(n&&n.isBuffer(e)&&(o=new Uint8Array(e).buffer,e=o===e?r(e):o),null===e||"object"!=typeof e)throw new Error("Cannot wrap null or non-object");if(s.isByteBuffer(e))return s.prototype.clone.call(e);if(e.array?e=e.array:e.buffer&&(e=e.buffer),!(e instanceof ArrayBuffer))throw new Error("Cannot wrap buffer of type "+typeof e+", "+e.constructor.name);return o=new s(0,i,!0),o.array=e,o.view=o.array.byteLength>0?new DataView(o.array):null,o.offset=0,o.length=e.byteLength,o},s.prototype.LE=function(e){return this.littleEndian="undefined"!=typeof e?!!e:!0,this},s.prototype.BE=function(e){return this.littleEndian="undefined"!=typeof e?!e:!1,this},s.prototype.resize=function(e){if(1>e)return!1;if(null===this.array&&(this.array=new ArrayBuffer(e),this.view=new DataView(this.array)),this.array.byteLength<e){var t=this.array,r=new Uint8Array(t),n=new ArrayBuffer(e),i=new Uint8Array(n);
i.set(r),this.array=n,this.view=new DataView(n)}return this},s.prototype.slice=function(e,t){if(null==this.array)throw new Error(this+" cannot be sliced: Already destroyed");if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.length),e>=t){var r=t;t=e,e=r}if(0>e||e>this.array.byteLength||1>t||t>this.array.byteLength)throw new Error(this+" cannot be sliced: Index out of bounds (0-"+this.array.byteLength+" -> "+e+"-"+t+")");var n=this.clone();return n.offset=e,n.length=t,n},s.prototype.ensureCapacity=function(e){return null===this.array?this.resize(e):this.array.byteLength<e?this.resize(2*this.array.byteLength>=e?2*this.array.byteLength:e):this},s.prototype.flip=function(){return this.length=null==this.array?0:this.offset,this.offset=0,this},s.prototype.mark=function(e){if(null==this.array)throw new Error(this+" cannot be marked: Already destroyed");if(e="undefined"!=typeof e?parseInt(e,10):this.offset,0>e||e>this.array.byteLength)throw new Error(this+" cannot be marked: Offset to mark is less than 0 or bigger than the capacity ("+this.array.byteLength+"): "+e);return this.markedOffset=e,this},s.prototype.reset=function(){if(null===this.array)throw new Error(this+" cannot be reset: Already destroyed");return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):(this.offset=0,this.length=0),this},s.prototype.clone=function(){var e=new s(-1,this.littleEndian,!0);return e.array=this.array,e.view=this.view,e.offset=this.offset,e.markedOffset=this.markedOffset,e.length=this.length,e},s.prototype.copy=function(){if(null==this.array)return this.clone();var e=new s(this.array.byteLength,this.littleEndian),t=new Uint8Array(this.array),r=new Uint8Array(e.array);return r.set(t),e.offset=this.offset,e.markedOffset=this.markedOffset,e.length=this.length,e},s.prototype.remaining=function(){return null===this.array?0:this.length-this.offset},s.prototype.capacity=function(){return null!=this.array?this.array.byteLength:0},s.prototype.compact=function(){if(null==this.array)throw new Error(this+" cannot be compacted: Already destroyed");if(this.offset>this.length&&this.flip(),this.offset===this.length)return this.array=new ArrayBuffer(0),this.view=null,this;if(0===this.offset&&this.length===this.array.byteLength)return this;var e=new Uint8Array(this.array),t=new ArrayBuffer(this.length-this.offset),r=new Uint8Array(t);return r.set(e.subarray(this.offset,this.length)),this.array=t,this.markedOffset>=this.offset?this.markedOffset-=this.offset:this.markedOffset=-1,this.offset=0,this.length=this.array.byteLength,this},s.prototype.destroy=function(){return null!==this.array&&(this.array=null,this.view=null,this.offset=0,this.markedOffset=-1,this.length=0),this},s.prototype.reverse=function(){if(null===this.array)throw new Error(this+" cannot be reversed: Already destroyed");Array.prototype.reverse.call(new Uint8Array(this.array));var e=this.offset;return this.offset=this.array.byteLength-this.length,this.markedOffset=-1,this.length=this.array.byteLength-e,this.view=new DataView(this.array),this},s.prototype.append=function(e,t){if(e instanceof s||(e=s.wrap(e)),null===e.array)throw new Error(e+" cannot be appended to "+this+": Already destroyed");var r=e.length-e.offset;if(0==r)return this;0>r&&(e=e.clone().flip(),r=e.length-e.offset),t="undefined"!=typeof t?t:(this.offset+=r)-r,this.ensureCapacity(t+r);var n=new Uint8Array(e.array),i=new Uint8Array(this.array);return i.set(n.subarray(e.offset,e.length),t),this},s.prototype.prepend=function(e,t){if(e instanceof s||(e=s.wrap(e)),null===e.array)throw e+" cannot be prepended to "+this+": Already destroyed";var r=e.length-e.offset;if(0==r)return this;0>r&&(e=e.clone().flip(),r=e.length-e.offset);var n="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset;var i=r-t;return i>0?(this.ensureCapacity(this.length+i),this.append(this,r),this.offset+=i,this.length+=i,this.append(e,0)):this.append(e,t-r),n&&(this.offset-=r),this},s.prototype.writeInt8=function(e,t){return t="undefined"!=typeof t?t:(this.offset+=1)-1,this.ensureCapacity(t+1),this.view.setInt8(t,e),this},s.prototype.readInt8=function(e){if(e="undefined"!=typeof e?e:(this.offset+=1)-1,e>=this.array.byteLength)throw new Error("Cannot read int8 from "+this+" at "+e+": Capacity overflow");return this.view.getInt8(e)},s.prototype.writeByte=s.prototype.writeInt8,s.prototype.readByte=s.prototype.readInt8,s.prototype.writeUint8=function(e,t){return t="undefined"!=typeof t?t:(this.offset+=1)-1,this.ensureCapacity(t+1),this.view.setUint8(t,e),this},s.prototype.readUint8=function(e){if(e="undefined"!=typeof e?e:(this.offset+=1)-1,e+1>this.array.byteLength)throw new Error("Cannot read uint8 from "+this+" at "+e+": Capacity overflow");return this.view.getUint8(e)},s.prototype.writeInt16=function(e,t){return t="undefined"!=typeof t?t:(this.offset+=2)-2,this.ensureCapacity(t+2),this.view.setInt16(t,e,this.littleEndian),this},s.prototype.readInt16=function(e){if(e="undefined"!=typeof e?e:(this.offset+=2)-2,e+2>this.array.byteLength)throw new Error("Cannot read int16 from "+this+" at "+e+": Capacity overflow");return this.view.getInt16(e,this.littleEndian)},s.prototype.writeShort=s.prototype.writeInt16,s.prototype.readShort=s.prototype.readInt16,s.prototype.writeUint16=function(e,t){return t="undefined"!=typeof t?t:(this.offset+=2)-2,this.ensureCapacity(t+2),this.view.setUint16(t,e,this.littleEndian),this},s.prototype.readUint16=function(e){if(e="undefined"!=typeof e?e:(this.offset+=2)-2,e+2>this.array.byteLength)throw new Error("Cannot read int16 from "+this+" at "+e+": Capacity overflow");return this.view.getUint16(e,this.littleEndian)},s.prototype.writeInt32=function(e,t){return t="undefined"!=typeof t?t:(this.offset+=4)-4,this.ensureCapacity(t+4),this.view.setInt32(t,e,this.littleEndian),this},s.prototype.readInt32=function(e){if(e="undefined"!=typeof e?e:(this.offset+=4)-4,e+4>this.array.byteLength)throw new Error("Cannot read int32 from "+this+" at "+e+": Capacity overflow");return this.view.getInt32(e,this.littleEndian)},s.prototype.writeInt=s.prototype.writeInt32,s.prototype.readInt=s.prototype.readInt32,s.prototype.writeUint32=function(e,t){return t="undefined"!=typeof t?t:(this.offset+=4)-4,this.ensureCapacity(t+4),this.view.setUint32(t,e,this.littleEndian),this},s.prototype.readUint32=function(e){if(e="undefined"!=typeof e?e:(this.offset+=4)-4,e+4>this.array.byteLength)throw new Error("Cannot read uint32 from "+this+" at "+e+": Capacity overflow");return this.view.getUint32(e,this.littleEndian)},s.prototype.writeFloat32=function(e,t){return t="undefined"!=typeof t?t:(this.offset+=4)-4,this.ensureCapacity(t+4),this.view.setFloat32(t,e,this.littleEndian),this},s.prototype.readFloat32=function(e){if(e="undefined"!=typeof e?e:(this.offset+=4)-4,null===this.array||e+4>this.array.byteLength)throw new Error("Cannot read float32 from "+this+" at "+e+": Capacity overflow");return this.view.getFloat32(e,this.littleEndian)},s.prototype.writeFloat=s.prototype.writeFloat32,s.prototype.readFloat=s.prototype.readFloat32,s.prototype.writeFloat64=function(e,t){return t="undefined"!=typeof t?t:(this.offset+=8)-8,this.ensureCapacity(t+8),this.view.setFloat64(t,e,this.littleEndian),this},s.prototype.readFloat64=function(e){if(e="undefined"!=typeof e?e:(this.offset+=8)-8,null===this.array||e+8>this.array.byteLength)throw new Error("Cannot read float64 from "+this+" at "+e+": Capacity overflow");return this.view.getFloat64(e,this.littleEndian)},s.prototype.writeDouble=s.prototype.writeFloat64,s.prototype.readDouble=s.prototype.readFloat64,e&&(s.prototype.writeInt64=function(t,r){return r="undefined"!=typeof r?r:(this.offset+=8)-8,"object"==typeof t&&t instanceof e||(t=e.fromNumber(t,!1)),this.ensureCapacity(r+8),this.littleEndian?(this.view.setInt32(r,t.getLowBits(),!0),this.view.setInt32(r+4,t.getHighBits(),!0)):(this.view.setInt32(r,t.getHighBits(),!1),this.view.setInt32(r+4,t.getLowBits(),!1)),this},s.prototype.readInt64=function(t){if(t="undefined"!=typeof t?t:(this.offset+=8)-8,null===this.array||t+8>this.array.byteLength)throw this.offset-=8,new Error("Cannot read int64 from "+this+" at "+t+": Capacity overflow");var r;return r=this.littleEndian?e.fromBits(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!1):e.fromBits(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!1)},s.prototype.writeUint64=function(t,r){return r="undefined"!=typeof r?r:(this.offset+=8)-8,"object"==typeof t&&t instanceof e||(t=e.fromNumber(t,!0)),this.ensureCapacity(r+8),this.littleEndian?(this.view.setUint32(r,t.getLowBitsUnsigned(),!0),this.view.setUint32(r+4,t.getHighBitsUnsigned(),!0)):(this.view.setUint32(r,t.getHighBitsUnsigned(),!1),this.view.setUint32(r+4,t.getLowBitsUnsigned(),!1)),this},s.prototype.readUint64=function(t){if(t="undefined"!=typeof t?t:(this.offset+=8)-8,null===this.array||t+8>this.array.byteLength)throw this.offset-=8,new Error("Cannot read int64 from "+this+" at "+t+": Capacity overflow");var r;return r=this.littleEndian?e.fromBits(this.view.getUint32(t,!0),this.view.getUint32(t+4,!0),!0):e.fromBits(this.view.getUint32(t+4,!1),this.view.getUint32(t,!1),!0)},s.prototype.writeLong=s.prototype.writeInt64,s.prototype.readLong=s.prototype.readInt64),s.MAX_VARINT32_BYTES=5,s.prototype.writeVarint32=function(e,t){var r="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset,e>>>=0,this.ensureCapacity(t+s.calculateVarint32(e));var n=this.view,i=0;return n.setUint8(t,128|e),e>=128?(n.setUint8(t+1,e>>7|128),e>=16384?(n.setUint8(t+2,e>>14|128),e>=1<<21?(n.setUint8(t+3,e>>21|128),e>=1<<28?(n.setUint8(t+4,e>>28&127),i=5):(n.setUint8(t+3,127&n.getUint8(t+3)),i=4)):(n.setUint8(t+2,127&n.getUint8(t+2)),i=3)):(n.setUint8(t+1,127&n.getUint8(t+1)),i=2)):(n.setUint8(t,127&n.getUint8(t)),i=1),r?(this.offset+=i,this):i},s.prototype.readVarint32=function(e){var t="undefined"==typeof e;e="undefined"!=typeof e?e:this.offset;var r,n=0,i=this.view,o=0;do r=i.getUint8(e+n),n<s.MAX_VARINT32_BYTES&&(o|=(127&r)<<7*n>>>0),++n;while(128&r);return o=0|o,t?(this.offset+=n,o):{value:o,length:n}},s.prototype.writeZigZagVarint32=function(e,t){return this.writeVarint32(s.zigZagEncode32(e),t)},s.prototype.readZigZagVarint32=function(e){var t=this.readVarint32(e);return"object"==typeof t?(t.value=s.zigZagDecode32(t.value),t):s.zigZagDecode32(t)},s.MAX_VARINT64_BYTES=10;var a=128,f=a*a,u=a*f,l=f*f;e&&(s.prototype.writeVarint64=function(t,r){var n="undefined"==typeof r;r="undefined"!=typeof r?r:this.offset,"object"==typeof t&&t instanceof e||(t=e.fromNumber(t,!1));var i=t.toInt()>>>0,o=t.shiftRightUnsigned(28).toInt()>>>0,a=t.shiftRightUnsigned(56).toInt()>>>0,f=s.calculateVarint64(t);this.ensureCapacity(r+f);var u=this.view;switch(f){case 10:u.setUint8(r+9,a>>>7|128);case 9:u.setUint8(r+8,128|a);case 8:u.setUint8(r+7,o>>>21|128);case 7:u.setUint8(r+6,o>>>14|128);case 6:u.setUint8(r+5,o>>>7|128);case 5:u.setUint8(r+4,128|o);case 4:u.setUint8(r+3,i>>>21|128);case 3:u.setUint8(r+2,i>>>14|128);case 2:u.setUint8(r+1,i>>>7|128);case 1:u.setUint8(r+0,128|i)}return u.setUint8(r+f-1,127&u.getUint8(r+f-1)),n?(this.offset+=f,this):f},s.prototype.readVarint64=function(t){var r="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset;var n,i,o=t,s=this.view,a=0,f=0;if(i=s.getUint8(t++),n=127&i,128&i&&(i=s.getUint8(t++),n|=(127&i)<<7,128&i&&(i=s.getUint8(t++),n|=(127&i)<<14,128&i&&(i=s.getUint8(t++),n|=(127&i)<<21,128&i&&(i=s.getUint8(t++),a=127&i,128&i&&(i=s.getUint8(t++),a|=(127&i)<<7,128&i&&(i=s.getUint8(t++),a|=(127&i)<<14,128&i&&(i=s.getUint8(t++),a|=(127&i)<<21,128&i&&(i=s.getUint8(t++),f=127&i,128&i&&(i=s.getUint8(t++),f|=(127&i)<<7,128&i))))))))))throw new Error("Data must be corrupt: Buffer overrun");var u=e.from28Bits(n,a,f,!1);return r?(this.offset=t,u):{value:u,length:t-o}},s.prototype.writeZigZagVarint64=function(e,t){return this.writeVarint64(s.zigZagEncode64(e),t)},s.prototype.readZigZagVarint64=function(t){var r=this.readVarint64(t);return"object"!=typeof r||r instanceof e?s.zigZagDecode64(r):(r.value=s.zigZagDecode64(r.value),r)}),s.prototype.writeVarint=s.prototype.writeVarint32,s.prototype.readVarint=s.prototype.readVarint32,s.prototype.writeZigZagVarint=s.prototype.writeZigZagVarint32,s.prototype.readZigZagVarint=s.prototype.readZigZagVarint32,s.calculateVarint32=function(e){return e>>>=0,a>e?1:f>e?2:u>e?3:l>e?4:5},e&&(s.calculateVarint64=function(t){"object"==typeof t&&t instanceof e||(t=e.fromNumber(t,!1));var r=t.toInt()>>>0,n=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==n?f>r?a>r?1:2:u>r?3:4:f>n?a>n?5:6:u>n?7:8:a>i?9:10}),s.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},s.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},e&&(s.zigZagEncode64=function(t){return"object"==typeof t&&t instanceof e?t.unsigned&&(t=t.toSigned()):t=e.fromNumber(t,!1),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},s.zigZagDecode64=function(t){return"object"==typeof t&&t instanceof e?t.unsigned||(t=t.toUnsigned()):t=e.fromNumber(t,!0),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()}),s.decodeUTF8Char=function(e,t){var r,n,i,o,s,a,f=e.readUint8(t),u=t;if(0==(128&f))a=f,t+=1;else if(192==(224&f))r=e.readUint8(t+1),a=(31&f)<<6|63&r,t+=2;else if(224==(240&f))r=e.readUint8(t+1),n=e.readUint8(t+2),a=(15&f)<<12|(63&r)<<6|63&n,t+=3;else if(240==(248&f))r=e.readUint8(t+1),n=e.readUint8(t+2),i=e.readUint8(t+3),a=(7&f)<<18|(63&r)<<12|(63&n)<<6|63&i,t+=4;else if(248==(252&f))r=e.readUint8(t+1),n=e.readUint8(t+2),i=e.readUint8(t+3),o=e.readUint8(t+4),a=(3&f)<<24|(63&r)<<18|(63&n)<<12|(63&i)<<6|63&o,t+=5;else{if(252!=(254&f))throw new Error("Cannot decode UTF8 character at offset "+t+": charCode (0x"+f.toString(16)+") is invalid");r=e.readUint8(t+1),n=e.readUint8(t+2),i=e.readUint8(t+3),o=e.readUint8(t+4),s=e.readUint8(t+5),a=(1&f)<<30|(63&r)<<24|(63&n)<<18|(63&i)<<12|(63&o)<<6|63&s,t+=6}return{"char":a,length:t-u}},s.encodeUTF8Char=function(e,t,r){var n=r;if(0>e)throw new Error("Cannot encode UTF8 character: charCode ("+e+") is negative");if(128>e)t.writeUint8(127&e,r),r+=1;else if(2048>e)t.writeUint8(e>>6&31|192,r).writeUint8(63&e|128,r+1),r+=2;else if(65536>e)t.writeUint8(e>>12&15|224,r).writeUint8(e>>6&63|128,r+1).writeUint8(63&e|128,r+2),r+=3;else if(2097152>e)t.writeUint8(e>>18&7|240,r).writeUint8(e>>12&63|128,r+1).writeUint8(e>>6&63|128,r+2).writeUint8(63&e|128,r+3),r+=4;else if(67108864>e)t.writeUint8(e>>24&3|248,r).writeUint8(e>>18&63|128,r+1).writeUint8(e>>12&63|128,r+2).writeUint8(e>>6&63|128,r+3).writeUint8(63&e|128,r+4),r+=5;else{if(!(2147483648>e))throw new Error("Cannot encode UTF8 character: charCode (0x"+e.toString(16)+") is too large (>= 0x80000000)");t.writeUint8(e>>30&1|252,r).writeUint8(e>>24&63|128,r+1).writeUint8(e>>18&63|128,r+2).writeUint8(e>>12&63|128,r+3).writeUint8(e>>6&63|128,r+4).writeUint8(63&e|128,r+5),r+=6}return r-n},s.calculateUTF8Char=function(e){if(0>e)throw new Error("Cannot calculate length of UTF8 character: charCode ("+e+") is negative");if(128>e)return 1;if(2048>e)return 2;if(65536>e)return 3;if(2097152>e)return 4;if(67108864>e)return 5;if(2147483648>e)return 6;throw new Error("Cannot calculate length of UTF8 character: charCode (0x"+e.toString(16)+") is too large (>= 0x80000000)")},s.calculateUTF8String=function(e){e=""+e;for(var t=0,r=0,n=e.length;n>r;++r)t+=s.calculateUTF8Char(e.charCodeAt(r));return t};var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return p+="",s.encode64=function(e){e instanceof s?e.length<e.offset&&(e=e.clone().flip()):e=s.wrap(e);var t,r,n,i,o,a,f,u,l=e.offset,h=0,d=[];do t=e.readUint8(l++),r=e.length>l?e.readUint8(l++):0,n=e.length>l?e.readUint8(l++):0,u=t<<16|r<<8|n,i=u>>18&63,o=u>>12&63,a=u>>6&63,f=63&u,d[h++]=p.charAt(i)+p.charAt(o)+p.charAt(a)+p.charAt(f);while(l<e.length);var c=d.join(""),y=(e.length-e.offset)%3;return(y?c.slice(0,y-3):c)+"===".slice(y||3)},s.decode64=function(e,t){if("string"!=typeof e)throw new Error("Illegal argument: Not a string");var r,n,i,o,a,f,u,l,h=0,d=new s(Math.ceil(e.length/3),t);do{if(o=p.indexOf(e.charAt(h++)),a=p.indexOf(e.charAt(h++)),f=p.indexOf(e.charAt(h++)),u=p.indexOf(e.charAt(h++)),0>o||0>a||0>f||0>u)throw new Error("Illegal argument: Not a valid base64 encoded string");l=o<<18|a<<12|f<<6|u,r=l>>16&255,n=l>>8&255,i=255&l,64==f?d.writeUint8(r):64==u?d.writeUint8(r).writeUint8(n):d.writeUint8(r).writeUint8(n).writeUint8(i)}while(h<e.length);return d.flip()},s.encodeHex=function(e){if(e instanceof s?e.length<e.offset&&(e=e.clone().flip()):e=s.wrap(e),null===e.array)return"";for(var t,r=[],n=e.offset,i=e.length;i>n;++n)t=e.view.getUint8(n).toString(16).toUpperCase(),t.length<2&&(t="0"+t),r.push(t);return r.join("")},s.decodeHex=function(e,t){if("string"!=typeof e)throw new Error("Illegal argument: Not a string");if(e.length%2!==0)throw new Error("Illegal argument: Not a hex encoded string");for(var r=new s(e.length/2,t),n=0,i=e.length;i>n;n+=2)r.writeUint8(parseInt(e.substring(n,n+2),16));return r.flip()},s.encodeBinary=function(e){e instanceof s?e.length<e.offset&&(e=e.clone().flip()):e=s.wrap(e);for(var t=[],r=e.view,n=e.offset,i=e.length;i>n;++n)t.push(String.fromCharCode(r.getUint8(n)));return t.join("")},s.decodeBinary=function(e,t){if("string"!=typeof e)throw new Error("Illegal argument: Not a string");for(var r,n=e.length,i=new ArrayBuffer(n),o=new DataView(i),a=0;n>a;++a){if((r=e.charCodeAt(a))>255)throw new Error("Illegal argument: Not a binary string (char code "+r+")");o.setUint8(a,r)}var f=new s(n,t,!0);return f.array=i,f.view=o,f.length=n,f},s.prototype.writeUTF8String=function(e,t){var r="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset;var n=t,i=s.calculateUTF8String(e);this.ensureCapacity(t+i);for(var o=0,a=e.length;a>o;++o)t+=s.encodeUTF8Char(e.charCodeAt(o),this,t);return r?(this.offset=t,this):t-n},s.prototype.readUTF8String=function(e,t){var r="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset;for(var n,i="",o=t,a=0;e>a;++a)n=s.decodeUTF8Char(this,t),t+=n.length,i+=String.fromCharCode(n["char"]);return r?(this.offset=t,i):{string:i,length:t-o}},s.prototype.readUTF8StringBytes=function(e,t){var r="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset;var n,i="",o=t;for(e=t+e;e>t;)n=s.decodeUTF8Char(this,t),t+=n.length,i+=String.fromCharCode(n["char"]);if(t!=e)throw new Error("Actual string length differs from the specified: "+((t>e?"+":"")+t-e)+" bytes");return r?(this.offset=t,i):{string:i,length:t-o}},s.prototype.writeLString=function(e,t){e=""+e;var r="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset;var n=s.encodeUTF8Char(e.length,this,t);return n+=this.writeUTF8String(e,t+n),r?(this.offset+=n,this):n},s.prototype.readLString=function(e){var t="undefined"==typeof e;e="undefined"!=typeof e?e:this.offset;var r=s.decodeUTF8Char(this,e),n=this.readUTF8String(r["char"],e+r.length);return t?(this.offset+=r.length+n.length,n.string):{string:n.string,length:r.length+n.length}},s.prototype.writeVString=function(e,t){e=""+e;var r="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset;var n=this.writeVarint32(s.calculateUTF8String(e),t);return n+=this.writeUTF8String(e,t+n),r?(this.offset+=n,this):n},s.prototype.readVString=function(e){var t="undefined"==typeof e;e="undefined"!=typeof e?e:this.offset;var r=this.readVarint32(e),n=this.readUTF8StringBytes(r.value,e+r.length);return t?(this.offset+=r.length+n.length,n.string):{string:n.string,length:r.length+n.length}},s.prototype.writeCString=function(e,t){e=""+e;var r="undefined"==typeof t;t="undefined"!=typeof t?t:this.offset;var n=this.writeUTF8String(e,t);return this.writeUint8(0,t+n),r?(this.offset+=n+1,this):n+1},s.prototype.readCString=function(e){var t="undefined"==typeof e;e="undefined"!=typeof e?e:this.offset;var r,n="",i=e;do r=s.decodeUTF8Char(this,e),e+=r.length,0!=r["char"]&&(n+=String.fromCharCode(r["char"]));while(0!=r["char"]);return t?(this.offset=e,n):{string:n,length:e-i}},s.prototype.writeJSON=function(e,t,r){return r="function"==typeof r?r:JSON.stringify,this.writeLString(r(e),t)},s.prototype.readJSON=function(e,t){t="function"==typeof t?t:JSON.parse;var r=this.readLString(e);return"string"==typeof r?t(r):{data:t(r.string),length:r.length}},s.prototype.toColumns=function(e){if(null===this.array)return"DESTROYED";e="undefined"!=typeof e?parseInt(e,10):16,1>e&&(e=16);var t,r="",n=[],i=this.view;r+=0==this.offset&&0==this.length?"|":0==this.length?">":0==this.offset?"<":" ";for(var o=0,s=this.array.byteLength;s>o;++o){if(o>0&&o%e==0){for(;r.length<3*e+1;)r+="   ";n.push(r),r=" "}t=i.getUint8(o).toString(16).toUpperCase(),t.length<2&&(t="0"+t),r+=t,r+=o+1==this.offset&&o+1==this.length?"|":o+1==this.offset?"<":o+1==this.length?">":" "}for(" "!=r&&n.push(r),o=0,s=n.length;s>o;++o)for(;n[o].length<3*e+1;)n[o]+="   ";var a=0;for(r="",o=0,s=this.array.byteLength;s>o;++o)o>0&&o%e==0&&(n[a]+=" "+r,r="",a++),t=i.getUint8(o),r+=t>32&&127>t?String.fromCharCode(t):".";return""!=r&&(n[a]+=" "+r),n.join("\n")},s.prototype.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e((null!=this.array?"ByteBuffer(offset="+this.offset+",markedOffset="+this.markedOffset+",length="+this.length+",capacity="+this.array.byteLength+")":"ByteBuffer(DESTROYED)")+"\n-------------------------------------------------------------------\n"+this.toColumns()+"\n")},s.prototype.toHex=function(e){var t,r,n,i="",o=this.view;if(e){if(null===this.array)return"DESTROYED";for(i+=0==this.offset&&0==this.length?"|":0==this.length?">":0==this.offset?"<":" ",r=0,n=this.array.byteLength;n>r;++r)t=o.getUint8(r).toString(16).toUpperCase(),t.length<2&&(t="0"+t),i+=t,i+=r+1===this.offset&&r+1===this.length?"|":r+1==this.offset?"<":r+1==this.length?">":" ";return i}return s.encodeHex(this)},s.prototype.toBinary=function(){return s.encodeBinary(this)},s.prototype.toBase64=function(){return null===this.array||this.offset>=this.length?"":s.encode64(this)},s.prototype.toUTF8=function(){return null===this.array||this.offset>=this.length?"":this.readUTF8StringBytes(this.length-this.offset,this.offset).string},s.prototype.toString=function(e){switch(e=e||""){case"utf8":return this.toUTF8();case"base64":return this.toBase64();case"hex":return this.toHex();case"binary":return this.toBinary();case"debug":return this.toHex(!0);default:return null===this.array?"ByteBuffer(DESTROYED)":"ByteBuffer(offset="+this.offset+",markedOffset="+this.markedOffset+",length="+this.length+",capacity="+this.array.byteLength+")"}},s.prototype.toArrayBuffer=function(e){if(null===this.array)return null;var t=this.clone();t.offset>t.length&&t.flip();var r=!1;return(t.offset>0||t.length<t.array.byteLength)&&(t.compact(),r=!0),e&&!r?t.copy().array:t.array},n&&(s.prototype.toBuffer=function(){if(null===this.array)return null;var e=this.offset,t=this.length;if(e>t){var r=e;e=t,t=r}return new n(new Uint8Array(this.array).subarray(e,t))}),s}"undefined"!=typeof r&&r.exports?r.exports=i(t("long")):"undefined"!=typeof e&&e.amd?e("ByteBuffer",["Math/Long"],function(e){return i(e)}):(n.dcodeIO||(n.dcodeIO={}),n.dcodeIO.ByteBuffer=i(n.dcodeIO.Long))}(this)},{"long":18}],17:[function(t,r){!function(t){"use strict";var n=function(e,t,r){e&&"object"==typeof e&&(t=e.high,r=e.unsigned,e=e.low),this.low=0|e,this.high=0|t,this.unsigned=!!r},i={},o={};n.fromInt=function(e,t){var r,s;return t?(e>>>=0,e>=0&&256>e&&(s=o[e])?s:(r=new n(e,0>(0|e)?-1:0,!0),e>=0&&256>e&&(o[e]=r),r)):(e=0|e,e>=-128&&128>e&&(s=i[e])?s:(r=new n(e,0>e?-1:0,!1),e>=-128&&128>e&&(i[e]=r),r))},n.fromNumber=function(e,t){return t=!!t,isNaN(e)||!isFinite(e)?n.ZERO:!t&&-u>=e?n.MIN_SIGNED_VALUE:t&&0>=e?n.MIN_UNSIGNED_VALUE:!t&&e+1>=u?n.MAX_SIGNED_VALUE:t&&e>=f?n.MAX_UNSIGNED_VALUE:0>e?n.fromNumber(-e,!1).negate():new n(e%a|0,e/a|0,t)},n.fromBits=function(e,t,r){return new n(e,t,r)},n.from28Bits=function(e,t,r,i){return n.fromBits(e|t<<28,t>>>4|r<<24,i)},n.fromString=function(e,t,r){if(0==e.length)throw new Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return n.ZERO;if("number"==typeof t&&(r=t,t=!1),r=r||10,2>r||r>36)throw new Error("radix out of range: "+r);if("-"==e.charAt(0))return n.fromString(e.substring(1),t,r).negate();if(e.indexOf("-")>=0)throw new Error('number format error: interior "-" character: '+e);for(var i=n.fromNumber(Math.pow(r,8)),o=n.ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),f=parseInt(e.substring(s,s+a),r);if(8>a){var u=n.fromNumber(Math.pow(r,a));o=o.multiply(u).add(n.fromNumber(f))}else o=o.multiply(i),o=o.add(n.fromNumber(f))}return o.unsigned=t,o};var s=65536,a=s*s,f=a*a,u=f/2,l=n.fromInt(1<<24);n.ZERO=n.fromInt(0),n.UZERO=n.fromInt(0,!0),n.ONE=n.fromInt(1),n.UONE=n.fromInt(1,!0),n.NEG_ONE=n.fromInt(-1),n.MAX_SIGNED_VALUE=n.fromBits(-1,2147483647,!1),n.MAX_UNSIGNED_VALUE=n.fromBits(-1,-1,!0),n.MAX_VALUE=n.MAX_SIGNED_VALUE,n.MIN_SIGNED_VALUE=n.fromBits(0,-2147483648,!1),n.MIN_UNSIGNED_VALUE=n.fromBits(0,0,!0),n.MIN_VALUE=n.MIN_SIGNED_VALUE,n.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},n.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*a+(this.low>>>0):this.high*a+(this.low>>>0)},n.prototype.toString=function(e){if(e=e||10,2>e||e>36)throw new Error("radix out of range: "+e);if(this.isZero())return"0";var t;if(this.isNegative()){if(this.equals(n.MIN_SIGNED_VALUE)){var r=n.fromNumber(e),i=this.div(r);return t=i.multiply(r).subtract(this),i.toString(e)+t.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=n.fromNumber(Math.pow(e,6));t=this;for(var s="";;){var a=t.div(o),f=t.subtract(a.multiply(o)).toInt(),u=f.toString(e);if(t=a,t.isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},n.prototype.getHighBits=function(){return this.high},n.prototype.getHighBitsUnsigned=function(){return this.high>>>0},n.prototype.getLowBits=function(){return this.low},n.prototype.getLowBitsUnsigned=function(){return this.low>>>0},n.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(n.MIN_SIGNED_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},n.prototype.isZero=function(){return 0==this.high&&0==this.low},n.prototype.isNegative=function(){return!this.unsigned&&this.high<0},n.prototype.isOdd=function(){return 1==(1&this.low)},n.prototype.isEven=function(){return 0==(1&this.low)},n.prototype.equals=function(e){return this.unsigned!=e.unsigned&&this.high>>>31!=e.high>>>31?!1:this.high==e.high&&this.low==e.low},n.prototype.notEquals=function(e){return!this.equals(e)},n.prototype.lessThan=function(e){return this.compare(e)<0},n.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},n.prototype.greaterThan=function(e){return this.compare(e)>0},n.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},n.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high==this.high&&e.low>>>0>this.low>>>0?-1:1:this.subtract(e).isNegative()?-1:1},n.prototype.negate=function(){return!this.unsigned&&this.equals(n.MIN_SIGNED_VALUE)?n.MIN_SIGNED_VALUE:this.not().add(n.ONE)},n.prototype.add=function(e){var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,f=e.low>>>16,u=65535&e.low,l=0,p=0,h=0,d=0;return d+=o+u,h+=d>>>16,d&=65535,h+=i+f,p+=h>>>16,h&=65535,p+=r+a,l+=p>>>16,p&=65535,l+=t+s,l&=65535,n.fromBits(h<<16|d,l<<16|p,this.unsigned)},n.prototype.subtract=function(e){return this.add(e.negate())},n.prototype.multiply=function(e){if(this.isZero())return n.ZERO;if(e.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE))return e.isOdd()?n.MIN_VALUE:n.ZERO;if(e.equals(n.MIN_VALUE))return this.isOdd()?n.MIN_VALUE:n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(l)&&e.lessThan(l))return n.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,f=e.low>>>16,u=65535&e.low,p=0,h=0,d=0,c=0;return c+=o*u,d+=c>>>16,c&=65535,d+=i*u,h+=d>>>16,d&=65535,d+=o*f,h+=d>>>16,d&=65535,h+=r*u,p+=h>>>16,h&=65535,h+=i*f,p+=h>>>16,h&=65535,h+=o*a,p+=h>>>16,h&=65535,p+=t*u+r*f+i*a+o*s,p&=65535,n.fromBits(d<<16|c,p<<16|h,this.unsigned)},n.prototype.div=function(e){if(e.isZero())throw new Error("division by zero");if(this.isZero())return this.unsigned?n.UZERO:n.ZERO;var t,r,i;if(this.equals(n.MIN_SIGNED_VALUE)){if(e.equals(n.ONE)||e.equals(n.NEG_ONE))return n.MIN_SIGNED_VALUE;if(e.equals(n.MIN_SIGNED_VALUE))return n.ONE;var o=this.shiftRight(1);return t=o.div(e).shiftLeft(1),t.equals(n.ZERO)?e.isNegative()?n.ONE:n.NEG_ONE:(r=this.subtract(e.multiply(t)),i=t.add(r.div(e)))}if(e.equals(n.MIN_SIGNED_VALUE))return this.unsigned?n.UZERO:n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(i=n.ZERO,r=this;r.greaterThanOrEqual(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),a=48>=s?1:Math.pow(2,s-48),f=n.fromNumber(t,this.unsigned),u=f.multiply(e);u.isNegative()||u.greaterThan(r);)t-=a,f=n.fromNumber(t,this.unsigned),u=f.multiply(e);f.isZero()&&(f=n.ONE),i=i.add(f),r=r.subtract(u)}return i},n.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},n.prototype.not=function(){return n.fromBits(~this.low,~this.high,this.unsigned)},n.prototype.and=function(e){return n.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},n.prototype.or=function(e){return n.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},n.prototype.xor=function(e){return n.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},n.prototype.shiftLeft=function(e){if(e&=63,0==e)return this;var t=this.low;if(32>e){var r=this.high;return n.fromBits(t<<e,r<<e|t>>>32-e,this.unsigned)}return n.fromBits(0,t<<e-32,this.unsigned)},n.prototype.shiftRight=function(e){if(e&=63,0==e)return this;var t=this.high;if(32>e){var r=this.low;return n.fromBits(r>>>e|t<<32-e,t>>e,this.unsigned)}return n.fromBits(t>>e-32,t>=0?0:-1,this.unsigned)},n.prototype.shiftRightUnsigned=function(e){if(e&=63,0==e)return this;var t=this.high;if(32>e){var r=this.low;return n.fromBits(r>>>e|t<<32-e,t>>>e,this.unsigned)}return 32==e?n.fromBits(t,0,this.unsigned):n.fromBits(t>>>e-32,0,this.unsigned)},n.prototype.toSigned=function(){var e=this.clone();return e.unsigned=!1,e},n.prototype.toUnsigned=function(){var e=this.clone();return e.unsigned=!0,e},n.prototype.clone=function(){return new n(this.low,this.high,this.unsigned)},"undefined"!=typeof r&&r.exports?r.exports=n:"undefined"!=typeof e&&e.amd?e("Math/Long",[],function(){return n}):(t.dcodeIO||(t.dcodeIO={}),t.dcodeIO.Long=n)}(this)},{}],18:[function(e,t){t.exports=e("./dist/Long.js")},{"./dist/Long.js":17}],19:[function(){(function(){"use strict";function e(e,t){var r=e.split("."),n=a;!(r[0]in n)&&n.execScript&&n.execScript("var "+r[0]);for(var i;r.length&&(i=r.shift());)r.length||void 0===t?n=n[i]?n[i]:n[i]={}:n[i]=t}function t(e){var t,r,n,i,o,s,a,u,l,p=e.length,h=0,d=Number.POSITIVE_INFINITY;for(u=0;p>u;++u)e[u]>h&&(h=e[u]),e[u]<d&&(d=e[u]);for(t=1<<h,r=new(f?Uint32Array:Array)(t),n=1,i=0,o=2;h>=n;){for(u=0;p>u;++u)if(e[u]===n){for(s=0,a=i,l=0;n>l;++l)s=s<<1|1&a,a>>=1;for(l=s;t>l;l+=o)r[l]=n<<16|u;++i}++n,i<<=1,o<<=1}return[r,h,d]}function r(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=f?new Uint8Array(e):e,this.m=!1,this.i=l,this.r=!1,(t||!(t={}))&&(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case u:this.b=32768,this.c=new(f?Uint8Array:Array)(32768+this.h+258);break;case l:this.b=0,this.c=new(f?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;
break;default:throw Error("invalid inflate mode")}}function n(e,t){for(var r,n=e.f,i=e.d,o=e.input,s=e.a,a=o.length;t>i;){if(s>=a)throw Error("input buffer is broken");n|=o[s++]<<i,i+=8}return r=n&(1<<t)-1,e.f=n>>>t,e.d=i-t,e.a=s,r}function i(e,t){for(var r,n,i=e.f,o=e.d,s=e.input,a=e.a,f=s.length,u=t[0],l=t[1];l>o&&!(a>=f);)i|=s[a++]<<o,o+=8;return r=u[i&(1<<l)-1],n=r>>>16,e.f=i>>n,e.d=o-n,e.a=a,65535&r}function o(e){function r(e,t,r){var o,s,a,f;for(f=0;e>f;)switch(o=i(this,t)){case 16:for(a=3+n(this,2);a--;)r[f++]=s;break;case 17:for(a=3+n(this,3);a--;)r[f++]=0;s=0;break;case 18:for(a=11+n(this,7);a--;)r[f++]=0;s=0;break;default:s=r[f++]=o}return r}var o,s,a,u,l=n(e,5)+257,p=n(e,5)+1,h=n(e,4)+4,d=new(f?Uint8Array:Array)(y.length);for(u=0;h>u;++u)d[y[u]]=n(e,3);if(!f)for(u=h,h=d.length;h>u;++u)d[y[u]]=0;o=t(d),s=new(f?Uint8Array:Array)(l),a=new(f?Uint8Array:Array)(p),e.j(t(r.call(e,l,o,s)),t(r.call(e,p,o,a)))}function s(e,t){var n,i;switch(this.input=e,this.a=0,(t||!(t={}))&&(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),n=e[this.a++],i=e[this.a++],15&n){case O:this.method=O;break;default:throw Error("unsupported compression method")}if(0!==((n<<8)+i)%31)throw Error("invalid fcheck flag:"+((n<<8)+i)%31);if(32&i)throw Error("fdict flag is not supported");this.q=new r(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}var a=this,f="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView,u=0,l=1,p={t:u,s:l};r.prototype.k=function(){for(;!this.m;){var e=n(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,r=this.a,i=this.c,s=this.b,a=t.length,p=void 0,h=void 0,d=i.length,c=void 0;if(this.d=this.f=0,r+1>=a)throw Error("invalid uncompressed block header: LEN");if(p=t[r++]|t[r++]<<8,r+1>=a)throw Error("invalid uncompressed block header: NLEN");if(h=t[r++]|t[r++]<<8,p===~h)throw Error("invalid uncompressed block header: length verify");if(r+p>t.length)throw Error("input buffer is broken");switch(this.i){case u:for(;s+p>i.length;){if(c=d-s,p-=c,f)i.set(t.subarray(r,r+c),s),s+=c,r+=c;else for(;c--;)i[s++]=t[r++];this.b=s,i=this.e(),s=this.b}break;case l:for(;s+p>i.length;)i=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(f)i.set(t.subarray(r,r+p),s),s+=p,r+=p;else for(;p--;)i[s++]=t[r++];this.a=r,this.b=s,this.c=i;break;case 1:this.j(N,x);break;case 2:o(this);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var h,d,c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],y=f?new Uint16Array(c):c,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],m=f?new Uint16Array(g):g,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],v=f?new Uint8Array(b):b,w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],E=f?new Uint16Array(w):w,S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=f?new Uint8Array(S):S,I=new(f?Uint8Array:Array)(288);for(h=0,d=I.length;d>h;++h)I[h]=143>=h?8:255>=h?9:279>=h?7:8;var U,A,N=t(I),P=new(f?Uint8Array:Array)(30);for(U=0,A=P.length;A>U;++U)P[U]=5;var x=t(P);r.prototype.j=function(e,t){var r=this.c,o=this.b;this.o=e;for(var s,a,f,u,l=r.length-258;256!==(s=i(this,e));)if(256>s)o>=l&&(this.b=o,r=this.e(),o=this.b),r[o++]=s;else for(a=s-257,u=m[a],0<v[a]&&(u+=n(this,v[a])),s=i(this,t),f=E[s],0<T[s]&&(f+=n(this,T[s])),o>=l&&(this.b=o,r=this.e(),o=this.b);u--;)r[o]=r[o++-f];for(;8<=this.d;)this.d-=8,this.a--;this.b=o},r.prototype.w=function(e,t){var r=this.c,o=this.b;this.o=e;for(var s,a,f,u,l=r.length;256!==(s=i(this,e));)if(256>s)o>=l&&(r=this.e(),l=r.length),r[o++]=s;else for(a=s-257,u=m[a],0<v[a]&&(u+=n(this,v[a])),s=i(this,t),f=E[s],0<T[s]&&(f+=n(this,T[s])),o+u>l&&(r=this.e(),l=r.length);u--;)r[o]=r[o++-f];for(;8<=this.d;)this.d-=8,this.a--;this.b=o},r.prototype.e=function(){var e,t,r=new(f?Uint8Array:Array)(this.b-32768),n=this.b-32768,i=this.c;if(f)r.set(i.subarray(32768,r.length));else for(e=0,t=r.length;t>e;++e)r[e]=i[e+32768];if(this.g.push(r),this.l+=r.length,f)i.set(i.subarray(n,n+32768));else for(e=0;32768>e;++e)i[e]=i[n+e];return this.b=32768,i},r.prototype.z=function(e){var t,r,n,i,o=this.input.length/this.a+1|0,s=this.input,a=this.c;return e&&("number"==typeof e.p&&(o=e.p),"number"==typeof e.u&&(o+=e.u)),2>o?(r=(s.length-this.a)/this.o[2],i=258*(r/2)|0,n=i<a.length?a.length+i:a.length<<1):n=a.length*o,f?(t=new Uint8Array(n),t.set(a)):t=a,this.c=t},r.prototype.n=function(){var e,t,r,n,i,o=0,s=this.c,a=this.g,u=new(f?Uint8Array:Array)(this.l+(this.b-32768));if(0===a.length)return f?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,r=a.length;r>t;++t)for(e=a[t],n=0,i=e.length;i>n;++n)u[o++]=e[n];for(t=32768,r=this.b;r>t;++t)u[o++]=s[t];return this.g=[],this.buffer=u},r.prototype.v=function(){var e,t=this.b;return f?this.r?(e=new Uint8Array(t),e.set(this.c.subarray(0,t))):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},s.prototype.k=function(){var e,t,r=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(r[this.a++]<<24|r[this.a++]<<16|r[this.a++]<<8|r[this.a++])>>>0;var n=e;if("string"==typeof n){var i,o,s=n.split("");for(i=0,o=s.length;o>i;i++)s[i]=(255&s[i].charCodeAt(0))>>>0;n=s}for(var a,f=1,u=0,l=n.length,p=0;l>0;){a=l>1024?1024:l,l-=a;do f+=n[p++],u+=f;while(--a);f%=65521,u%=65521}if(t!==(u<<16|f)>>>0)throw Error("invalid adler-32 checksum")}return e};var O=8;e("Zlib.Inflate",s),e("Zlib.Inflate.prototype.decompress",s.prototype.k);var B,_,j,L,C={ADAPTIVE:p.s,BLOCK:p.t};if(Object.keys)B=Object.keys(C);else for(_ in B=[],j=0,C)B[j++]=_;for(j=0,L=B.length;L>j;++j)_=B[j],e("Zlib.Inflate.BufferType."+_,C[_])}).call(this)},{}],20:[function(e,t){function r(e,t){var r,i,o={nodes:[],ways:[],rels:[]},s=function(e){e.timestamp&&(e.timestamp=new Date(e.timestamp).toISOString().substr(0,19)+"Z")};Date.prototype.toISOString||(s=function(){}),e instanceof ArrayBuffer?i=e:r=e,n.parse({filePath:r,buffer:i,format:"pbf",endDocument:function(){t(null,o)},bounds:function(){},node:function(e){e.type="node",s(e),o.nodes.push(e)},way:function(e){e.type="way",s(e),e.nodes=e.nodeRefs,delete e.nodeRefs,o.ways.push(e)},relation:function(e){e.type="relation",s(e),o.rels.push(e)},error:function(e){t(e)}})}var n=e("osm-read");t.exports=r},{"osm-read":12}],21:[function(e,t){t.exports={building:!0,highway:{included_values:{services:!0,rest_area:!0,escape:!0}},natural:{excluded_values:{coastline:!0,ridge:!0,arete:!0,tree_row:!0}},landuse:!0,waterway:{included_values:{riverbank:!0,dock:!0,boatyard:!0,dam:!0}},amenity:!0,leisure:!0,barrier:{included_values:{city_wall:!0,ditch:!0,hedge:!0,retaining_wall:!0,wall:!0,spikes:!0}},railway:{included_values:{station:!0,turntable:!0,roundhouse:!0,platform:!0}},area:!0,boundary:!0,man_made:{excluded_values:{cutline:!0,embankment:!0,pipeline:!0}},power:{included_values:{generator:!0,station:!0,sub_station:!0,transformer:!0}},place:!0,shop:!0,aeroway:{excluded_values:{taxiway:!0}},tourism:!0,historic:!0,public_transport:!0,office:!0,"building:part":!0,military:!0,ruins:!0,"area:highway":!0,craft:!0}},{}]},{},[1])(1)});